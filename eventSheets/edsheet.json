{
	"name": "EdSheet",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Scrolling"
		},
		{
			"eventType": "comment",
			"text": "Action type constants"
		},
		{
			"eventType": "variable",
			"name": "ACTION_DELETE",
			"type": "string",
			"initialValue": "Delete",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 433891990444951
		},
		{
			"eventType": "variable",
			"name": "ACTION_MODIFY",
			"type": "string",
			"initialValue": "Modify",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 715312206313320
		},
		{
			"eventType": "variable",
			"name": "ACTION_ADD",
			"type": "string",
			"initialValue": "Add",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 264717688872807
		},
		{
			"eventType": "comment",
			"text": "Editor state constants"
		},
		{
			"eventType": "variable",
			"name": "EDITOR_NEW",
			"type": "string",
			"initialValue": "New",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 665750619160415
		},
		{
			"eventType": "variable",
			"name": "EDITOR_MODIFY",
			"type": "string",
			"initialValue": "Modify",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 187409594517970
		},
		{
			"eventType": "variable",
			"name": "EDITOR_READY",
			"type": "string",
			"initialValue": "Ready",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 674999423969893
		},
		{
			"eventType": "comment",
			"text": "Constants Over"
		},
		{
			"eventType": "variable",
			"name": "MapSlot",
			"type": "number",
			"initialValue": "-1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 528458810781348
		},
		{
			"eventType": "variable",
			"name": "EdState",
			"type": "string",
			"initialValue": "NONE",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 454021335682234
		},
		{
			"eventType": "variable",
			"name": "EditUID",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 287541508327671
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 899755105326270
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 689190149648971,
					"parameters": {
						"variable": "EdState",
						"value": "\"NONE\""
					}
				},
				{
					"callFunction": "DisableScrolling",
					"sid": 609124955480099,
					"parameters": [
						"LayoutWidth / 2",
						"LayoutHeight / 2"
					]
				},
				{
					"id": "set-layer-scale",
					"objectClass": "System",
					"sid": 418961309408771,
					"parameters": {
						"layer": "\"Level\"",
						"scale": "0.175"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 246353665715332,
					"parameters": {
						"variable": "EdState",
						"value": "EDITOR_READY"
					}
				},
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 280209638056083,
					"parameters": {
						"tag": "\"bonuses\"",
						"file": "Bonuses.json"
					}
				},
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 738962485304961,
					"parameters": {
						"tag": "\"decor\"",
						"file": "Decors.json"
					}
				},
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 959676884163748,
					"parameters": {
						"tag": "\"obstacles\"",
						"file": "Obstacles.json"
					}
				},
				{
					"id": "request-project-file",
					"objectClass": "AJAX",
					"sid": 923360419084916,
					"parameters": {
						"tag": "\"base_types\"",
						"file": "Types.json"
					}
				},
				{
					"type": "comment",
					"text": "Reset the operation buffer"
				},
				{
					"id": "set-size",
					"objectClass": "changes_buffer",
					"sid": 455230207615758,
					"parameters": {
						"width": "0",
						"height": "Self.Height",
						"depth": "1"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "changes_buffer",
					"sid": 969303028104837,
					"parameters": {
						"instance-variable": "current_action",
						"value": "0"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "changes_buffer",
					"sid": 174736873160477,
					"parameters": {
						"instance-variable": "last_action",
						"value": "-1"
					}
				}
			],
			"sid": 157274110196663,
			"children": [
				{
					"eventType": "comment",
					"text": "In case you start preview of the editor layout"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-in-preview",
							"objectClass": "System",
							"sid": 898626106838177
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 695587742993957,
							"parameters": {
								"variable": "MapSlot",
								"comparison": 0,
								"value": "-1"
							}
						}
					],
					"actions": [],
					"sid": 130341415114771,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 488801415349261,
									"parameters": {
										"object": "road",
										"expression": "road.AnimationName",
										"comparison": 0,
										"value": "\"Finish\""
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "road",
									"sid": 369619336323099,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"callFunction": "AddSnapZones",
									"sid": 144854273136578,
									"parameters": [
										"road.UID"
									]
								}
							],
							"sid": 676026224057122
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Load existing map"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 739351540652020
						}
					],
					"actions": [],
					"sid": 448984671851948,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 895840669928876,
									"parameters": {
										"name": "\"loadloop\"",
										"start-index": "1",
										"end-index": "ThisLvl.Width - 1"
									}
								}
							],
							"actions": [],
							"sid": 174580764401156,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 601440199634528,
											"parameters": {
												"first-value": "loopindex(\"loadloop\")",
												"comparison": 0,
												"second-value": "1"
											}
										},
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 144182756034276,
											"parameters": {
												"object": "road"
											}
										}
									],
									"actions": [
										{
											"callFunction": "MoveObject",
											"sid": 880564256417947,
											"disabled": true,
											"parameters": [
												"ThisLvl.At(ThisLvl.CurX, 2)",
												"ThisLvl.At(ThisLvl.CurX, 3)",
												"ThisLvl.At(ThisLvl.CurX, 4)",
												"15000",
												"15000"
											]
										},
										{
											"id": "set-position",
											"objectClass": "road",
											"sid": 853283945164409,
											"parameters": {
												"x": "ThisLvl.At(loopindex(\"loadloop\"), 2)",
												"y": "ThisLvl.At(loopindex(\"loadloop\"), 3)"
											}
										},
										{
											"id": "set-angle",
											"objectClass": "road",
											"sid": 640099529014089,
											"parameters": {
												"angle": "ThisLvl.At(loopindex(\"loadloop\"), 4)"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "road",
											"sid": 247069324181539,
											"behaviorType": "DragDrop",
											"parameters": {
												"state": "disabled"
											}
										},
										{
											"callFunction": "check_placed",
											"sid": 324764345346905,
											"parameters": [
												"road.UID"
											]
										},
										{
											"callFunction": "AddSnapZones",
											"sid": 482326539926653,
											"parameters": [
												"road.UID"
											]
										}
									],
									"sid": 482686071855762
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 128055807563095
										}
									],
									"actions": [
										{
											"callFunction": "CreateObject",
											"sid": 264241763051194,
											"parameters": [
												"ThisLvl.At(loopindex(\"loadloop\"), 1)",
												"ThisLvl.At(loopindex(\"loadloop\"), 2)",
												"ThisLvl.At(loopindex(\"loadloop\"), 3)",
												"ThisLvl.At(loopindex(\"loadloop\"), 4)"
											]
										}
									],
									"sid": 742717348492648
								}
							]
						}
					]
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-any-completed",
					"objectClass": "AJAX",
					"sid": 450034782296500
				}
			],
			"actions": [],
			"sid": 398258316179797,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 661117024736326,
							"parameters": {
								"object": "LoadableDict",
								"expression": "LoadableDict.tag",
								"comparison": 0,
								"value": "AJAX.Tag"
							}
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "LoadableDict",
							"sid": 218952800910913,
							"parameters": {
								"json": "AJAX.LastData"
							}
						}
					],
					"sid": 197747331218811
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-created",
					"objectClass": "MapElement",
					"sid": 734059596971396
				}
			],
			"actions": [
				{
					"id": "set-effect-enabled",
					"objectClass": "MapElement",
					"sid": 386999572686789,
					"parameters": {
						"mode": "disable",
						"effect": "\"TintSelected\""
					}
				}
			],
			"sid": 544760595044569
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "On State Changed",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 446671333785173,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_READY"
							}
						}
					],
					"actions": [],
					"sid": 328684915098442,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 618528104180602
								}
							],
							"actions": [
								{
									"callFunction": "DisableScrolling",
									"sid": 552674768661679,
									"parameters": [
										"scrollx",
										"scrolly"
									]
								},
								{
									"callFunction": "EnableScrolling",
									"sid": 298529010696401,
									"parameters": [
										true,
										true,
										"LayoutWidth - ViewportWidth(\"Level\") / 2",
										"LayoutHeight - ViewportHeight(\"Level\") / 2",
										"0",
										"0",
										false
									]
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 706795880285348,
									"parameters": {
										"layer": "\"GUI_root\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 474960780881216,
									"parameters": {
										"group-name": "\"GUI_root\"",
										"state": "activated"
									}
								}
							],
							"sid": 396441569149136
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 970807498923600
						}
					],
					"actions": [],
					"sid": 879482825438442,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 672486987545095
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 335551868835661,
									"parameters": {
										"layer": "\"GUI_root\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 418582423415541,
									"parameters": {
										"group-name": "\"GUI_root\"",
										"state": "deactivated"
									}
								}
							],
							"sid": 318014805964991
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 400927068806200,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_NEW"
							}
						}
					],
					"actions": [],
					"sid": 141147873120367,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 723384346756737
								}
							],
							"actions": [
								{
									"callFunction": "DisableScrolling",
									"sid": 397605571704416,
									"parameters": [
										"LastX",
										"LastY"
									]
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 944496977968858,
									"parameters": {
										"layer": "\"GUI_create\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 775777611609457,
									"parameters": {
										"group-name": "\"GUI_create\"",
										"state": "activated"
									}
								}
							],
							"sid": 406565223440176
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 342257877224780
						}
					],
					"actions": [],
					"sid": 499657872649068,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 972850717453044
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 673263823349892,
									"parameters": {
										"layer": "\"GUI_create\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 943743457818239,
									"parameters": {
										"group-name": "\"GUI_create\"",
										"state": "deactivated"
									}
								}
							],
							"sid": 646381113968074
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 265752945019447,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_MODIFY"
							}
						}
					],
					"actions": [],
					"sid": 230068906368110,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 869546982776409
								}
							],
							"actions": [
								{
									"callFunction": "DisableScrolling",
									"sid": 448276486139320,
									"parameters": [
										"LastX",
										"LastY"
									]
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 616801748028289,
									"parameters": {
										"layer": "\"GUI_modify\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 421199569241253,
									"parameters": {
										"group-name": "\"GUI_modify\"",
										"state": "activated"
									}
								}
							],
							"sid": 822513070405924
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 333396591880642
						}
					],
					"actions": [],
					"sid": 941491393514538,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 357405364510279
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 948023339831518,
									"parameters": {
										"layer": "\"GUI_modify\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 322742934307490,
									"parameters": {
										"group-name": "\"GUI_modify\"",
										"state": "deactivated"
									}
								}
							],
							"sid": 815431927892311
						}
					]
				}
			],
			"sid": 462233869837648
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-changed",
					"objectClass": "scale",
					"sid": 472074279409222
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "scale_text",
					"sid": 104997628543958,
					"parameters": {
						"text": "\"Масштаб: \"&scale.Value"
					}
				},
				{
					"id": "set-layer-scale",
					"objectClass": "System",
					"sid": 126778791699009,
					"parameters": {
						"layer": "\"Level\"",
						"scale": "scale.Value / 8 + 0.05"
					}
				}
			],
			"sid": 799129767608662
		},
		{
			"eventType": "comment",
			"text": "Show object preview"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-selection-changed",
					"objectClass": "type",
					"sid": 801982290389706
				},
				{
					"id": "on-clicked",
					"objectClass": "AddObject",
					"sid": 544051112331985
				}
			],
			"actions": [],
			"sid": 835051331453863,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 745568311277064,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_READY"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 818604789720164,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_NEW"
							}
						}
					],
					"actions": [],
					"sid": 566774630776396,
					"children": [
						{
							"eventType": "comment",
							"text": "Destroy prev map element meant to be placed (to be sure)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "MapElement",
									"sid": 722904381390465,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "MapElement",
									"sid": 514015541829936
								}
							],
							"sid": 791924580333738
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 311970047820117,
									"parameters": {
										"object-name": "base_types.Get(str(type.SelectedIndex))",
										"layer": "\"Level\"",
										"x": "scrollx",
										"y": "scrolly",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 988028977277599,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 255259887116524,
											"parameters": {
												"object": "MapElement"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 117353904846289,
											"parameters": {
												"variable": "EditUID",
												"value": "MapElement.UID"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "MapElement",
											"sid": 291159858187825,
											"parameters": {
												"instance-variable": "placed",
												"value": "false"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "MapElement",
											"sid": 303729714092226,
											"parameters": {
												"opacity": "60"
											}
										},
										{
											"id": "set-angle",
											"objectClass": "MapElement",
											"sid": 427164807655199,
											"parameters": {
												"angle": "SetAngle.Value"
											}
										}
									],
									"sid": 210399771210680,
									"children": [
										{
											"eventType": "comment",
											"text": "Road specific inits"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-selection",
													"objectClass": "type",
													"sid": 371128370254201,
													"parameters": {
														"comparison": 0,
														"index": "0"
													}
												},
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 787625823475145,
													"parameters": {
														"object": "road"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "road",
													"sid": 488735336186391,
													"parameters": {
														"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "road",
													"sid": 589587215004171,
													"parameters": {
														"instance-variable": "TurnAngle",
														"value": "SetTurnAngle.Value"
													}
												},
												{
													"callFunction": "check_placed",
													"sid": 202449991752600,
													"parameters": [
														"road.UID"
													]
												}
											],
											"sid": 274577566096775
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 376305896130415
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "MapElement",
													"sid": 828469698916099,
													"parameters": {
														"animation": "current_subs.Get(str(subtype.SelectedIndex))",
														"from": "beginning"
													}
												},
												{
													"callFunction": "check_placed",
													"sid": 229409162426130,
													"parameters": [
														"MapElement.UID"
													]
												}
											],
											"sid": 171076140495403
										}
									]
								}
							]
						}
					],
					"isOrBlock": true
				}
			],
			"isOrBlock": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap",
					"objectClass": "Touch",
					"sid": 198994141889150
				},
				{
					"id": "is-touching-object",
					"objectClass": "Touch",
					"sid": 896984323378235,
					"parameters": {
						"object": "MapElement"
					},
					"isInverted": true
				},
				{
					"id": "is-touching-object",
					"objectClass": "Touch",
					"sid": 383477765472600,
					"parameters": {
						"object": "SnapZone"
					},
					"isInverted": true
				}
			],
			"actions": [],
			"sid": 752382778976664,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 665533942249297,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_READY"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 766803777205274,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_NEW"
							}
						},
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 309729494788934,
							"parameters": {
								"x": "Touch.X(\"Level\")",
								"y": "Touch.Y(\"Level\")"
							}
						}
					],
					"sid": 893000413334201,
					"children": [
						{
							"eventType": "comment",
							"text": "Destroy prev map element meant to be placed (to be sure)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "MapElement",
									"sid": 394298609416291,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "MapElement",
									"sid": 477764150470616
								}
							],
							"sid": 700811317553602
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 638222233891116,
									"parameters": {
										"object-name": "base_types.Get(str(type.SelectedIndex))",
										"layer": "\"Level\"",
										"x": "scrollx",
										"y": "scrolly",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 218603549005213,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 496203565594533,
											"parameters": {
												"object": "MapElement"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 244031819067641,
											"parameters": {
												"variable": "EditUID",
												"value": "MapElement.UID"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "MapElement",
											"sid": 993034619537331,
											"parameters": {
												"instance-variable": "placed",
												"value": "false"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "MapElement",
											"sid": 242776835008816,
											"parameters": {
												"opacity": "60"
											}
										},
										{
											"id": "set-angle",
											"objectClass": "MapElement",
											"sid": 248441505933577,
											"parameters": {
												"angle": "SetAngle.Value"
											}
										}
									],
									"sid": 780139768188587,
									"children": [
										{
											"eventType": "comment",
											"text": "Road specific inits"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-selection",
													"objectClass": "type",
													"sid": 396351302813564,
													"parameters": {
														"comparison": 0,
														"index": "0"
													}
												},
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 577674411751500,
													"parameters": {
														"object": "road"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "road",
													"sid": 254052908337078,
													"parameters": {
														"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "road",
													"sid": 358105859547190,
													"parameters": {
														"instance-variable": "TurnAngle",
														"value": "SetTurnAngle.Value"
													}
												},
												{
													"callFunction": "check_placed",
													"sid": 655317830206198,
													"parameters": [
														"road.UID"
													]
												}
											],
											"sid": 650977568377145
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 264028975714849
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "MapElement",
													"sid": 103934002684093,
													"parameters": {
														"animation": "current_subs.Get(str(subtype.SelectedIndex))",
														"from": "beginning"
													}
												},
												{
													"callFunction": "check_placed",
													"sid": 936600300048668,
													"parameters": [
														"MapElement.UID"
													]
												}
											],
											"sid": 188417321149671
										}
									]
								}
							]
						}
					],
					"isOrBlock": true
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-dragging",
					"objectClass": "MapElement",
					"sid": 294129136189466,
					"behaviorType": "DragDrop"
				}
			],
			"actions": [
				{
					"callFunction": "check_placed",
					"sid": 848940005222656,
					"parameters": [
						"MapElement.UID"
					]
				}
			],
			"sid": 593032830916480,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 520137860032668,
							"parameters": {
								"object": "scroll_zone"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 762743934508865,
							"parameters": {
								"x": "lerp(scrollx, Touch.X(\"Level\"), 0.03)",
								"y": "lerp(scrolly, Touch.Y(\"Level\"), 0.03)"
							}
						}
					],
					"sid": 951993290051548
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-selection-changed",
					"objectClass": "subtype",
					"sid": 109533365639488
				},
				{
					"id": "pick-by-unique-id",
					"objectClass": "MapElement",
					"sid": 885207095746227,
					"parameters": {
						"unique-id": "EditUID"
					}
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "MapElement",
					"sid": 611856599019795,
					"parameters": {
						"animation": "current_subs.Get(str(subtype.SelectedIndex))",
						"from": "beginning"
					}
				}
			],
			"sid": 248143288916488
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 457868624133260,
					"parameters": {
						"object": "SnapZone"
					}
				},
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 154819899576793,
					"parameters": {
						"variable": "EdState",
						"comparison": 0,
						"value": "EDITOR_READY"
					}
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 623837601098773,
					"parameters": {
						"variable": "EdState",
						"value": "EDITOR_NEW"
					}
				},
				{
					"id": "set-selection",
					"objectClass": "type",
					"sid": 394657177099962,
					"parameters": {
						"index": "0"
					}
				},
				{
					"id": "set-enabled",
					"objectClass": "subtype",
					"sid": 825973651048945,
					"parameters": {
						"mode": "disabled"
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 118856882605444,
					"parameters": {
						"seconds": "dt"
					}
				},
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 414531385736151,
					"parameters": {
						"object-to-create": "road",
						"layer": "\"Level\"",
						"x": "scrollx",
						"y": "scrolly",
						"create-hierarchy": false,
						"template-name": "\"\""
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 954339875457975,
					"parameters": {
						"variable": "EditUID",
						"value": "road.UID"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "road",
					"sid": 682228982603154,
					"parameters": {
						"instance-variable": "placed",
						"value": "false"
					}
				},
				{
					"id": "set-opacity",
					"objectClass": "road",
					"sid": 776399995902456,
					"parameters": {
						"opacity": "60"
					}
				},
				{
					"id": "set-animation",
					"objectClass": "road",
					"sid": 201494892366531,
					"parameters": {
						"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
						"from": "beginning"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "road",
					"sid": 697528339580614,
					"parameters": {
						"instance-variable": "TurnAngle",
						"value": "SetTurnAngle.Value"
					}
				},
				{
					"id": "set-checked",
					"objectClass": "Snap",
					"sid": 639660717980990,
					"parameters": {
						"state": "checked"
					}
				},
				{
					"callFunction": "snap",
					"sid": 444558498710162,
					"parameters": [
						"road.UID",
						"SnapZone.UID"
					]
				},
				{
					"callFunction": "check_placed",
					"sid": 684246616429480,
					"parameters": [
						"road.UID"
					]
				}
			],
			"sid": 693215184343755
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 757184357700790,
					"parameters": {
						"object": "MapElement"
					}
				}
			],
			"actions": [],
			"sid": 337797336461488,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 573204005567090,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_MODIFY"
							}
						}
					],
					"actions": [],
					"sid": 914733658854053,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "MapElement",
									"sid": 950287600050803,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 283060831093303,
									"parameters": {
										"variable": "EdState",
										"value": "EDITOR_READY"
									}
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 766613047523464,
									"parameters": {
										"type": "log",
										"message": "\"Edit stopped\""
									}
								},
								{
									"callFunction": "DeselectObject",
									"sid": 748545132659553,
									"parameters": [
										"MapElement.UID"
									]
								}
							],
							"sid": 150294532716583
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 246562859303096
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 210989560903857,
									"parameters": {
										"type": "log",
										"message": "\"Edit \"&MapElement.UID"
									}
								}
							],
							"sid": 245474628725151,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 201607205804708,
											"parameters": {
												"object": "MapElement"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "MapElement",
											"sid": 857763818234381,
											"parameters": {
												"unique-id": "EditUID"
											}
										}
									],
									"actions": [
										{
											"id": "log",
											"objectClass": "Browser",
											"sid": 978840002294265,
											"parameters": {
												"type": "log",
												"message": "\"Edit \"&MapElement.UID&\" removed\""
											}
										},
										{
											"callFunction": "DeselectObject",
											"sid": 615328722643555,
											"parameters": [
												"MapElement.UID"
											]
										}
									],
									"sid": 194697301069662
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"callFunction": "SelectObject",
											"sid": 511288390464333,
											"parameters": [
												"MapElement.UID"
											]
										}
									],
									"sid": 322418386173360
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 602121667117608
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 700461518557064,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_READY"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 487569940929586,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_MODIFY"
							}
						},
						{
							"callFunction": "SelectObject",
							"sid": 852659907348688,
							"parameters": [
								"MapElement.UID"
							]
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 674912445008273,
							"parameters": {
								"type": "log",
								"message": "\"Edit \"&MapElement.UID"
							}
						}
					],
					"sid": 378768565074293
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 289308076306817
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 993100330482522,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_NEW"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 949760796043807,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"callFunction": "AddNewObject",
							"sid": 901516859441593
						}
					],
					"sid": 544249370494803
				}
			]
		},
		{
			"functionName": "check_placed",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "uid",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 452886218102853
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "MapElement",
					"sid": 526242146379090,
					"parameters": {
						"unique-id": "uid"
					}
				}
			],
			"actions": [],
			"sid": 223089097971843,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 974201120469877,
							"parameters": {
								"first-value": "MapElement.ObjectTypeName",
								"comparison": 0,
								"second-value": "\"road\""
							}
						}
					],
					"actions": [],
					"sid": 341841774783187,
					"children": [
						{
							"eventType": "variable",
							"name": "r1",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 513244482161862
						},
						{
							"eventType": "variable",
							"name": "r2",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 681696211397296
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "MapElement",
									"sid": 533897420605039,
									"parameters": {
										"object": "SnapZone"
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 733562392403207,
									"disabled": true,
									"parameters": {
										"type": "log",
										"message": "SnapZone.PickedCount"
									}
								}
							],
							"sid": 983583880264377,
							"children": [
								{
									"eventType": "comment",
									"text": "Snap to road"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 856703164301555,
											"parameters": {
												"object": "SnapZone"
											}
										}
									],
									"actions": [
										{
											"id": "log",
											"objectClass": "Browser",
											"sid": 862901959773595,
											"disabled": true,
											"parameters": {
												"type": "log",
												"message": "\"obj: \"&SnapZone.UID"
											}
										}
									],
									"sid": 117483263863745,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-checked",
													"objectClass": "Snap",
													"sid": 138293423102640
												}
											],
											"actions": [
												{
													"id": "set-effect-enabled",
													"objectClass": "MapElement",
													"sid": 868557609899856,
													"parameters": {
														"mode": "disable",
														"effect": "\"TintRed\""
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "MapElement",
													"sid": 257898980334587,
													"parameters": {
														"instance-variable": "can_place",
														"value": "true"
													}
												}
											],
											"sid": 607071254714184,
											"children": [
												{
													"eventType": "comment",
													"text": "Snap to zone if not yet correctly snapped for some reason (like being the final road segment)"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-overlapping-another-object",
															"objectClass": "MapElement",
															"sid": 983240735563580,
															"parameters": {
																"object": "SnapZone"
															}
														}
													],
													"actions": [
														{
															"callFunction": "snap",
															"sid": 649734332444074,
															"parameters": [
																"MapElement.UID",
																"SnapZone.UID"
															]
														}
													],
													"sid": 891933807689208
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 279989663055416
												}
											],
											"actions": [
												{
													"id": "set-effect-enabled",
													"objectClass": "MapElement",
													"sid": 240140146481315,
													"parameters": {
														"mode": "enable",
														"effect": "\"TintRed\""
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "MapElement",
													"sid": 349479452836106,
													"parameters": {
														"instance-variable": "can_place",
														"value": "false"
													}
												},
												{
													"id": "alert",
													"objectClass": "Browser",
													"sid": 549005193492255,
													"disabled": true,
													"parameters": {
														"message": "\"red\""
													}
												}
											],
											"sid": 432348600852652
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 142859980007416
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 740998552695426,
									"parameters": {
										"unique-id": "MapElement.UID"
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-enabled",
									"objectClass": "MapElement",
									"sid": 510298523156931,
									"parameters": {
										"mode": "disable",
										"effect": "\"TintRed\""
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "MapElement",
									"sid": 296082806213099,
									"parameters": {
										"instance-variable": "can_place",
										"value": "true"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 224974934502368,
									"parameters": {
										"variable": "r1",
										"value": "road.snapped_start"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 646891760385229,
									"parameters": {
										"variable": "r2",
										"value": "road.snapped_end"
									}
								}
							],
							"sid": 129683136234627,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 338555260039806,
											"parameters": {
												"object": "road"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "road",
											"sid": 624987898034992,
											"parameters": {
												"unique-id": "r1"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "road",
											"sid": 373061494510699,
											"parameters": {
												"instance-variable": "snapped_end",
												"value": "-1"
											}
										}
									],
									"sid": 963382907871240,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 439143764787697,
													"parameters": {
														"object": "road"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "road",
													"sid": 159248208116736,
													"parameters": {
														"unique-id": "MapElement.UID"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "road",
													"sid": 839062886592118,
													"parameters": {
														"instance-variable": "snapped_start",
														"value": "-1"
													}
												}
											],
											"sid": 419178712919044
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 277762563636173,
											"parameters": {
												"object": "road"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "road",
											"sid": 519248682157152,
											"parameters": {
												"unique-id": "r2"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "road",
											"sid": 657737563077266,
											"parameters": {
												"instance-variable": "snapped_start",
												"value": "-1"
											}
										}
									],
									"sid": 549880110912570,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 269698541958542,
													"parameters": {
														"object": "road"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "road",
													"sid": 999085147675465,
													"parameters": {
														"unique-id": "MapElement.UID"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "road",
													"sid": 390737072399777,
													"parameters": {
														"instance-variable": "snapped_end",
														"value": "-1"
													}
												}
											],
											"sid": 728395644695610
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 307784175469559
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 835568783066151
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "MapElement",
							"sid": 832428415090399,
							"parameters": {
								"mode": "disable",
								"effect": "\"TintRed\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "MapElement",
							"sid": 387845002267482,
							"parameters": {
								"instance-variable": "can_place",
								"value": "true"
							}
						}
					],
					"sid": 296997279888537
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "MapElement",
							"sid": 737730097947830,
							"parameters": {
								"object": "road"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "MapElement",
							"sid": 664795203986855,
							"parameters": {
								"object": "SnapZone"
							},
							"isInverted": true
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 716638529065819,
							"parameters": {
								"first-value": "MapElement.ObjectTypeName",
								"comparison": 0,
								"second-value": "\"road\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "MapElement",
							"sid": 775306131129328,
							"parameters": {
								"mode": "enable",
								"effect": "\"TintRed\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "MapElement",
							"sid": 298383155820884,
							"parameters": {
								"instance-variable": "can_place",
								"value": "false"
							}
						},
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 732120847756158,
							"disabled": true,
							"parameters": {
								"message": "\"red\""
							}
						}
					],
					"sid": 602648174388836
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 459685779603854
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 732000881879072
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "MapElement",
							"sid": 930643705903489,
							"parameters": {
								"mode": "disable",
								"effect": "\"TintRed\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "MapElement",
							"sid": 146053773070265,
							"parameters": {
								"instance-variable": "can_place",
								"value": "true"
							}
						}
					],
					"sid": 464465204129852
				}
			]
		},
		{
			"functionName": "snap",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "uid",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 458542657420809
				},
				{
					"name": "snap_uid",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 978791865754332
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "road",
					"sid": 931771756319968,
					"parameters": {
						"unique-id": "uid"
					}
				},
				{
					"id": "pick-by-unique-id",
					"objectClass": "SnapZone",
					"sid": 841909100261598,
					"parameters": {
						"unique-id": "snap_uid"
					}
				}
			],
			"actions": [
				{
					"id": "alert",
					"objectClass": "Browser",
					"sid": 746304872844227,
					"disabled": true,
					"parameters": {
						"message": "\"Snap in: \"&road.UID&newline&SnapZone.UID&\" \"&SnapZone.snap_to&\" \"&SnapZone.isEnd"
					}
				}
			],
			"sid": 691549695420793,
			"children": [
				{
					"eventType": "variable",
					"name": "snapped_id",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 671863423877360
				},
				{
					"eventType": "variable",
					"name": "vector",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 961696170165241
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "SnapZone",
							"sid": 787836211447518,
							"parameters": {
								"instance-variable": "isEnd"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "road",
							"sid": 177639681053958,
							"parameters": {
								"x": "SnapZone.X",
								"y": "SnapZone.Y"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "road",
							"sid": 702548363020234,
							"parameters": {
								"angle": "SnapZone.Angle"
							}
						},
						{
							"id": "set-value",
							"objectClass": "SetAngle",
							"sid": 823797522850857,
							"parameters": {
								"value": "MapElement.Angle > 180 ? MapElement.Angle - 360 : MapElement.Angle"
							}
						},
						{
							"id": "set-text",
							"objectClass": "Angle_text",
							"sid": 926745698084305,
							"parameters": {
								"text": "\"Угол: \"&SetAngle.Value&\"°\""
							}
						}
					],
					"sid": 906599142477804,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 262608377941484,
									"parameters": {
										"object": "road"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 543067488903620,
									"parameters": {
										"unique-id": "SnapZone.snap_to"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "road",
									"sid": 441255606793621,
									"parameters": {
										"instance-variable": "snapped_end",
										"value": "uid"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 710891276436149,
									"parameters": {
										"variable": "snapped_id",
										"value": "road.UID"
									}
								}
							],
							"sid": 589713256458053,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 737015685764138,
											"parameters": {
												"object": "road"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "road",
											"sid": 836281506881974,
											"parameters": {
												"unique-id": "uid"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "road",
											"sid": 262523840611681,
											"parameters": {
												"instance-variable": "snapped_start",
												"value": "snapped_id"
											}
										},
										{
											"id": "alert",
											"objectClass": "Browser",
											"sid": 495728082578530,
											"disabled": true,
											"parameters": {
												"message": "\"Res: \"&newline&uid&\" \"&snapped_id"
											}
										},
										{
											"id": "alert",
											"objectClass": "Browser",
											"sid": 779703261463936,
											"disabled": true,
											"parameters": {
												"message": "\"Snapped to end\""
											}
										}
									],
									"sid": 452979915831741
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "SnapZone",
							"sid": 570054577104196,
							"parameters": {
								"instance-variable": "isEnd"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "road",
							"sid": 471930243791136,
							"parameters": {
								"angle": "SnapZone.Angle - road.TurnAngle + 180"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 785256370520358,
							"parameters": {
								"variable": "vector",
								"value": "distance(0, 0, (road.ImagePointX(\"End\") - road.X), (road.ImagePointY(\"End\") - road.Y))"
							}
						},
						{
							"id": "set-position",
							"objectClass": "road",
							"sid": 546891851436996,
							"parameters": {
								"x": "SnapZone.X - (road.ImagePointX(\"End\") - road.X)",
								"y": "SnapZone.Y - (road.ImagePointY(\"End\") - road.Y)"
							}
						},
						{
							"id": "set-value",
							"objectClass": "SetAngle",
							"sid": 344627752085668,
							"parameters": {
								"value": "MapElement.Angle > 180 ? MapElement.Angle - 360 : MapElement.Angle"
							}
						},
						{
							"id": "set-text",
							"objectClass": "Angle_text",
							"sid": 315370934340733,
							"parameters": {
								"text": "\"Угол: \"&SetAngle.Value&\"°\""
							}
						}
					],
					"sid": 399298182731244,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 340615629674098,
									"parameters": {
										"object": "road"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 433337800789452,
									"parameters": {
										"unique-id": "SnapZone.snap_to"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "road",
									"sid": 837014824603616,
									"parameters": {
										"instance-variable": "snapped_start",
										"value": "uid"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 303273929186873,
									"parameters": {
										"variable": "snapped_id",
										"value": "road.UID"
									}
								}
							],
							"sid": 458719305210088,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 375233621810778,
											"parameters": {
												"object": "road"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "road",
											"sid": 801273797389647,
											"parameters": {
												"unique-id": "uid"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "road",
											"sid": 973314743583004,
											"parameters": {
												"instance-variable": "snapped_end",
												"value": "snapped_id"
											}
										},
										{
											"id": "alert",
											"objectClass": "Browser",
											"sid": 586946548251980,
											"disabled": true,
											"parameters": {
												"message": "\"Res: \"&newline&uid&\" \"&snapped_id"
											}
										},
										{
											"id": "alert",
											"objectClass": "Browser",
											"sid": 107586314894389,
											"disabled": true,
											"parameters": {
												"message": "\"Snapped to start\""
											}
										}
									],
									"sid": 634455894661448
								}
							]
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Rotate selected object with mouse wheel"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-mouse-wheel",
					"objectClass": "Mouse",
					"sid": 638260123615218,
					"parameters": {
						"direction": "down"
					}
				}
			],
			"actions": [],
			"sid": 277386214630929,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-left-right-key-down",
							"objectClass": "Keyboard",
							"sid": 874662035142030,
							"parameters": {
								"key": "left-control"
							}
						}
					],
					"actions": [
						{
							"id": "set-value",
							"objectClass": "scale",
							"sid": 910384721451891,
							"parameters": {
								"value": "clamp(Self.Value - Self.Step, Self.Minimum, Self.Maximum)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "scale_text",
							"sid": 434052065124330,
							"parameters": {
								"text": "\"Масштаб: \"&scale.Value"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 466784687561742,
							"parameters": {
								"layer": "\"Level\"",
								"scale": "scale.Value / 8 + 0.05"
							}
						}
					],
					"sid": 166141084241629
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 596818219950788
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 920117818818223,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_NEW"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 794695064850973,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [],
					"sid": 251497396529764,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 154352217248727,
									"parameters": {
										"first-value": "MapElement.ObjectTypeName",
										"comparison": 0,
										"second-value": "\"road\""
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 604649759696480,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [],
							"sid": 985931222551486,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "Snap",
											"sid": 671457009520222
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "road",
											"sid": 269588993626122,
											"parameters": {
												"object": "SnapZone"
											}
										}
									],
									"actions": [],
									"sid": 362813662733499,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "road",
													"sid": 664705982351029,
													"parameters": {
														"instance-variable": "snapped_start",
														"comparison": 1,
														"value": "-1"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "road",
													"sid": 304797853037027,
													"parameters": {
														"instance-variable": "snapped_end",
														"comparison": 1,
														"value": "-1"
													}
												}
											],
											"actions": [
												{
													"id": "set-value",
													"objectClass": "SetTurnAngle",
													"sid": 600826931040604,
													"parameters": {
														"value": "clamp(Self.Value - 10, Self.Minimum, Self.Maximum)"
													}
												},
												{
													"id": "set-text",
													"objectClass": "TurnAngle_text",
													"sid": 558790611462578,
													"parameters": {
														"text": "\"Угол поворота: \"&SetTurnAngle.Value&\"°\""
													}
												},
												{
													"id": "set-animation",
													"objectClass": "road",
													"sid": 198730821131461,
													"parameters": {
														"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "road",
													"sid": 531255879419033,
													"parameters": {
														"instance-variable": "TurnAngle",
														"value": "SetTurnAngle.Value"
													}
												},
												{
													"callFunction": "snap",
													"sid": 802804297382162,
													"parameters": [
														"road.UID",
														"SnapZone.UID"
													]
												}
											],
											"sid": 642813200210896,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 877765777751579
												}
											],
											"actions": [
												{
													"callFunction": "ChangeAngle",
													"sid": 457367541456588,
													"parameters": [
														"-10"
													]
												}
											],
											"sid": 575134202082884
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 645469367557199
										}
									],
									"actions": [
										{
											"callFunction": "ChangeAngle",
											"sid": 390033191270871,
											"parameters": [
												"-10"
											]
										}
									],
									"sid": 282946492589924
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 323911938756513
								}
							],
							"actions": [
								{
									"callFunction": "ChangeAngle",
									"sid": 666350326720977,
									"parameters": [
										"-10"
									]
								}
							],
							"sid": 904977156617733
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 134614316920821
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 732810928662421,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_MODIFY"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ChangeAngle",
							"sid": 749572279992724,
							"parameters": [
								"-10"
							]
						}
					],
					"sid": 973766042346096
				}
			],
			"isOrBlock": true
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-mouse-wheel",
					"objectClass": "Mouse",
					"sid": 946067848550191,
					"parameters": {
						"direction": "up"
					}
				}
			],
			"actions": [],
			"sid": 583212113945915,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-left-right-key-down",
							"objectClass": "Keyboard",
							"sid": 108919692645049,
							"parameters": {
								"key": "left-control"
							}
						}
					],
					"actions": [
						{
							"id": "set-value",
							"objectClass": "scale",
							"sid": 243887893336994,
							"parameters": {
								"value": "clamp(Self.Value + Self.Step, Self.Minimum, Self.Maximum)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "scale_text",
							"sid": 149043833372611,
							"parameters": {
								"text": "\"Масштаб: \"&scale.Value"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 448100192989268,
							"parameters": {
								"layer": "\"Level\"",
								"scale": "scale.Value / 8 + 0.05"
							}
						}
					],
					"sid": 974861339432777
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 797234109943202
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 336563049978315,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_NEW"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 604559265416851,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [],
					"sid": 816054931314655,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 371945970036323,
									"parameters": {
										"first-value": "MapElement.ObjectTypeName",
										"comparison": 0,
										"second-value": "\"road\""
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 997100643558239,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [],
							"sid": 706059192195810,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-checked",
											"objectClass": "Snap",
											"sid": 519242330024602
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "road",
											"sid": 849969889165482,
											"parameters": {
												"object": "SnapZone"
											}
										}
									],
									"actions": [],
									"sid": 932145692237847,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "road",
													"sid": 835030808580484,
													"parameters": {
														"instance-variable": "snapped_start",
														"comparison": 1,
														"value": "-1"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "road",
													"sid": 683604321089654,
													"parameters": {
														"instance-variable": "snapped_end",
														"comparison": 1,
														"value": "-1"
													}
												}
											],
											"actions": [
												{
													"id": "set-value",
													"objectClass": "SetTurnAngle",
													"sid": 778431048935335,
													"parameters": {
														"value": "clamp(Self.Value + 10, Self.Minimum, Self.Maximum)"
													}
												},
												{
													"id": "set-text",
													"objectClass": "TurnAngle_text",
													"sid": 508879544408562,
													"parameters": {
														"text": "\"Угол поворота: \"&SetTurnAngle.Value&\"°\""
													}
												},
												{
													"id": "set-animation",
													"objectClass": "road",
													"sid": 683578635263609,
													"parameters": {
														"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
														"from": "beginning"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "road",
													"sid": 533432314520147,
													"parameters": {
														"instance-variable": "TurnAngle",
														"value": "SetTurnAngle.Value"
													}
												},
												{
													"callFunction": "snap",
													"sid": 440717879428567,
													"parameters": [
														"road.UID",
														"SnapZone.UID"
													]
												}
											],
											"sid": 834730096946127,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 877545323156997
												}
											],
											"actions": [
												{
													"callFunction": "ChangeAngle",
													"sid": 818163924693503,
													"parameters": [
														"10"
													]
												}
											],
											"sid": 844689505863597
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 721841569329810
										}
									],
									"actions": [
										{
											"callFunction": "ChangeAngle",
											"sid": 226280832357610,
											"parameters": [
												"10"
											]
										}
									],
									"sid": 351505033208552
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 337996462455596
								}
							],
							"actions": [
								{
									"callFunction": "ChangeAngle",
									"sid": 231066480345555,
									"parameters": [
										"10"
									]
								}
							],
							"sid": 642502668014949
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 147727119044201
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 855257835389352,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_MODIFY"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 933803600896425,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ChangeAngle",
							"sid": 340454693625819,
							"parameters": [
								"10"
							]
						}
					],
					"sid": 464661126996604
				}
			],
			"isOrBlock": true
		},
		{
			"eventType": "comment",
			"text": "Add new road segment and snap it this instant"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "GUI_root",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "AddObject",
							"sid": 387111301131341
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 183016510384721,
							"parameters": {
								"variable": "EdState",
								"comparison": 0,
								"value": "EDITOR_READY"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 550263025905639,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_NEW"
							}
						}
					],
					"sid": 881220161668682
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "RedoAction",
							"sid": 197251834090598
						}
					],
					"actions": [
						{
							"callFunction": "Redo",
							"sid": 893139340614060
						}
					],
					"sid": 447026564386786
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 438775846870394,
							"parameters": {
								"key": 89
							}
						},
						{
							"id": "is-left-right-key-down",
							"objectClass": "Keyboard",
							"sid": 596761087686272,
							"parameters": {
								"key": "left-control"
							}
						}
					],
					"actions": [
						{
							"callFunction": "Redo",
							"sid": 803079928151638
						}
					],
					"sid": 564440876976403
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "UndoAction",
							"sid": 532887569374553
						}
					],
					"actions": [
						{
							"callFunction": "Undo",
							"sid": 939121598587880
						}
					],
					"sid": 558537926857368
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 447037572639024,
							"parameters": {
								"key": 90
							}
						},
						{
							"id": "is-left-right-key-down",
							"objectClass": "Keyboard",
							"sid": 268138639330209,
							"parameters": {
								"key": "left-control"
							}
						},
						{
							"id": "is-left-right-key-down",
							"objectClass": "Keyboard",
							"sid": 237102554028699,
							"parameters": {
								"key": "left-shift"
							}
						}
					],
					"actions": [
						{
							"callFunction": "Undo",
							"sid": 311211645856621
						}
					],
					"sid": 641858929315567
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "SaveMap",
							"sid": 475891112077281
						}
					],
					"actions": [
						{
							"callFunction": "SaveProject",
							"sid": 846310449351719
						}
					],
					"sid": 398271178787811
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 573001330596636,
							"parameters": {
								"key": 83
							}
						},
						{
							"id": "is-left-right-key-down",
							"objectClass": "Keyboard",
							"sid": 621393466278329,
							"parameters": {
								"key": "left-control"
							}
						},
						{
							"id": "is-left-right-key-down",
							"objectClass": "Keyboard",
							"sid": 203425288520245,
							"parameters": {
								"key": "left-shift"
							}
						}
					],
					"actions": [
						{
							"callFunction": "SaveProject",
							"sid": 302811396048577
						}
					],
					"sid": 867355113537511
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "ToMenu",
							"sid": 148629078574850
						},
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 318206288316648,
							"parameters": {
								"key": 27
							}
						}
					],
					"actions": [
						{
							"id": "go-to-layout",
							"objectClass": "System",
							"sid": 819901553829522,
							"parameters": {
								"layout": "Menu"
							}
						}
					],
					"sid": 376890799354846,
					"isOrBlock": true
				}
			],
			"sid": 361199500923219
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "GUI_create",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "add_ten",
							"sid": 249019463094884
						}
					],
					"actions": [],
					"sid": 110530807953850,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "add_ten",
									"sid": 823812304098412,
									"parameters": {
										"unique-id": "14"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "MapElement",
									"sid": 370727607071275,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ChangeAngle",
									"sid": 910710096033344,
									"parameters": [
										"10"
									]
								}
							],
							"sid": 955069566990409
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "add_ten",
									"sid": 285216142904829,
									"parameters": {
										"unique-id": "20"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 473771566448257,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-value",
									"objectClass": "SetTurnAngle",
									"sid": 257164246197287,
									"parameters": {
										"value": "clamp(Self.Value + 10, Self.Minimum, Self.Maximum)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TurnAngle_text",
									"sid": 539215519802825,
									"parameters": {
										"text": "\"Угол поворота: \"&SetTurnAngle.Value&\"°\""
									}
								},
								{
									"id": "set-animation",
									"objectClass": "road",
									"sid": 206746677066362,
									"parameters": {
										"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
										"from": "beginning"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "road",
									"sid": 245625668510949,
									"parameters": {
										"instance-variable": "TurnAngle",
										"value": "SetTurnAngle.Value"
									}
								}
							],
							"sid": 338862201733252,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "road",
											"sid": 588384303453698,
											"parameters": {
												"object": "SnapZone"
											}
										},
										{
											"id": "is-checked",
											"objectClass": "Snap",
											"sid": 616620093926474
										}
									],
									"actions": [
										{
											"callFunction": "snap",
											"sid": 778492950771088,
											"parameters": [
												"road.UID",
												"SnapZone.UID"
											]
										}
									],
									"sid": 625288894603950
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "subtract_ten",
							"sid": 640207988087272
						}
					],
					"actions": [],
					"sid": 611130310448179,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "subtract_ten",
									"sid": 914346229332539,
									"parameters": {
										"unique-id": "15"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ChangeAngle",
									"sid": 800441327612191,
									"parameters": [
										"-10"
									]
								}
							],
							"sid": 716081100438522
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "subtract_ten",
									"sid": 926494668258690,
									"parameters": {
										"unique-id": "19"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 329902193562013,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-value",
									"objectClass": "SetTurnAngle",
									"sid": 269041103751244,
									"parameters": {
										"value": "clamp(Self.Value - 10, Self.Minimum, Self.Maximum)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TurnAngle_text",
									"sid": 579058488922176,
									"parameters": {
										"text": "\"Угол поворота: \"&SetTurnAngle.Value&\"°\""
									}
								},
								{
									"id": "set-animation",
									"objectClass": "road",
									"sid": 254791397504049,
									"parameters": {
										"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
										"from": "beginning"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "road",
									"sid": 470800217166419,
									"parameters": {
										"instance-variable": "TurnAngle",
										"value": "SetTurnAngle.Value"
									}
								}
							],
							"sid": 326279906018647,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "road",
											"sid": 771944788877563,
											"parameters": {
												"object": "SnapZone"
											}
										},
										{
											"id": "is-checked",
											"objectClass": "Snap",
											"sid": 657361111725977
										}
									],
									"actions": [
										{
											"callFunction": "snap",
											"sid": 672165236675126,
											"parameters": [
												"road.UID",
												"SnapZone.UID"
											]
										}
									],
									"sid": 769705073968897
								}
							]
						}
					]
				},
				{
					"functionName": "UpdateType",
					"functionDescription": "",
					"functionCategory": "GUI",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "typeID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 355148922734867
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 269334094898090,
					"children": [
						{
							"eventType": "comment",
							"text": "Segment"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 191559072400265,
									"parameters": {
										"variable": "typeID",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "SetTurnAngle",
									"sid": 298046716438312,
									"parameters": {
										"mode": "enabled"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "subtype",
									"sid": 237081332891870,
									"parameters": {
										"mode": "disabled"
									}
								}
							],
							"sid": 704820702469510,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 865375223293907,
											"parameters": {
												"object": "add_ten",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "add_ten",
											"sid": 432914595495820,
											"parameters": {
												"mode": "enabled"
											}
										}
									],
									"sid": 552635026378093
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 264901137249549,
											"parameters": {
												"object": "subtract_ten",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "subtract_ten",
											"sid": 937453471326295,
											"parameters": {
												"mode": "enabled"
											}
										}
									],
									"sid": 135074826711522
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Bonuses"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 893660802192411,
									"parameters": {
										"variable": "typeID",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "SetTurnAngle",
									"sid": 279719700192455,
									"parameters": {
										"mode": "disabled"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "subtype",
									"sid": 770239396402947,
									"disabled": true,
									"parameters": {
										"mode": "enabled"
									}
								},
								{
									"id": "clear",
									"objectClass": "subtype",
									"sid": 838548696703079,
									"disabled": true
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 679213743962664,
									"disabled": true,
									"parameters": {
										"text": "\"Монета\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 921098191263595,
									"disabled": true,
									"parameters": {
										"text": "\"Ракета\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 535624648491766,
									"disabled": true,
									"parameters": {
										"text": "\"Нитро\""
									}
								},
								{
									"id": "set-from-json",
									"objectClass": "subtype",
									"sid": 652058745146694,
									"parameters": {
										"json": "\"{\"\"c3\"\":true,\"\"w\"\":{\"\"x\"\":240,\"\"y\"\":640,\"\"w\"\":150,\"\"h\"\":22,\"\"l\"\":593705883740258,\"\"zi\"\":12,\"\"oX\"\":0,\"\"oY\"\":0},\"\"data\"\":{\"\"title\"\":\"\"\"\",\"\"isEnabled\"\":true,\"\"id\"\":\"\"\"\",\"\"items\"\":[\"\"Монета\"\",\"\"Ракета\"\",\"\"Нитро\"\",\"\"Бонус\"\"],\"\"selectedIndex\"\":-1,\"\"selectedIndices\"\":[]}}\""
									}
								},
								{
									"id": "load",
									"objectClass": "current_subs",
									"sid": 561759768695523,
									"parameters": {
										"json": "bonus_subs.AsJSON"
									}
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 938254499674024,
									"parameters": {
										"type": "log",
										"message": "subtype.AsJSON"
									}
								}
							],
							"sid": 935261736662251,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 245963430239567,
											"parameters": {
												"object": "add_ten",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "add_ten",
											"sid": 567237749055288,
											"parameters": {
												"mode": "enabled"
											}
										}
									],
									"sid": 197310443886045
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 508218094133043,
											"parameters": {
												"object": "subtract_ten",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "subtract_ten",
											"sid": 407458448024081,
											"parameters": {
												"mode": "enabled"
											}
										}
									],
									"sid": 311155937530988
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Obstacles"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 862815943862419,
									"parameters": {
										"variable": "typeID",
										"comparison": 0,
										"value": "2"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "SetTurnAngle",
									"sid": 832206239154101,
									"parameters": {
										"mode": "disabled"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "subtype",
									"sid": 155791701372097,
									"disabled": true,
									"parameters": {
										"mode": "enabled"
									}
								},
								{
									"id": "clear",
									"objectClass": "subtype",
									"sid": 374695075329262,
									"disabled": true
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 196778700272819,
									"disabled": true,
									"parameters": {
										"text": "\"Камень 1\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 152199421201575,
									"disabled": true,
									"parameters": {
										"text": "\"Камень 2\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 156461762772231,
									"disabled": true,
									"parameters": {
										"text": "\"Камень 3\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 373702934802384,
									"disabled": true,
									"parameters": {
										"text": "\"Шипы\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 951972495356357,
									"disabled": true,
									"parameters": {
										"text": "\"Бочка 1\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 398332117042092,
									"disabled": true,
									"parameters": {
										"text": "\"Бочка 2\""
									}
								},
								{
									"id": "set-from-json",
									"objectClass": "subtype",
									"sid": 474875354096753,
									"parameters": {
										"json": "\"{\"\"c3\"\":true,\"\"w\"\":{\"\"x\"\":240,\"\"y\"\":640,\"\"w\"\":150,\"\"h\"\":22,\"\"l\"\":593705883740258,\"\"zi\"\":12,\"\"oX\"\":0,\"\"oY\"\":0},\"\"data\"\":{\"\"title\"\":\"\"\"\",\"\"isEnabled\"\":true,\"\"id\"\":\"\"\"\",\"\"items\"\":[\"\"Камень 1\"\",\"\"Камень 2\"\",\"\"Камень 3\"\",\"\"Камень 4\"\",\"\"Камень 1 (мал.)\"\",\"\"Камень 2 (мал.)\"\",\"\"Камень 3 (мал.)\"\",\"\"Камень 4 (мал.)\"\",\"\"Шипы\"\"],\"\"selectedIndex\"\":-1,\"\"selectedIndices\"\":[]}}\""
									}
								},
								{
									"id": "load",
									"objectClass": "current_subs",
									"sid": 897146939904725,
									"parameters": {
										"json": "obstacle_subs.AsJSON"
									}
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 538749458022151,
									"parameters": {
										"type": "log",
										"message": "subtype.AsJSON"
									}
								}
							],
							"sid": 325423205233705,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 152692611218963,
											"parameters": {
												"object": "add_ten",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "add_ten",
											"sid": 613034283901399,
											"parameters": {
												"mode": "disabled"
											}
										}
									],
									"sid": 278521976291398
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 872127357965165,
											"parameters": {
												"object": "subtract_ten",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "subtract_ten",
											"sid": 829900922509628,
											"parameters": {
												"mode": "disabled"
											}
										}
									],
									"sid": 524317124275246
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Decor"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 669924481579025,
									"parameters": {
										"variable": "typeID",
										"comparison": 0,
										"value": "3"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "SetTurnAngle",
									"sid": 647993836036477,
									"parameters": {
										"mode": "disabled"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "subtype",
									"sid": 646780556196912,
									"disabled": true,
									"parameters": {
										"mode": "enabled"
									}
								},
								{
									"id": "clear",
									"objectClass": "subtype",
									"sid": 390890683138364,
									"disabled": true
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 284359703522503,
									"disabled": true,
									"parameters": {
										"text": "\"Дерево 1\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 374621110398374,
									"disabled": true,
									"parameters": {
										"text": "\"Дерево 2\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 142318454492979,
									"disabled": true,
									"parameters": {
										"text": "\"Палатка 1\""
									}
								},
								{
									"id": "add-item",
									"objectClass": "subtype",
									"sid": 699084823018115,
									"disabled": true,
									"parameters": {
										"text": "\"Палатка 2\""
									}
								},
								{
									"id": "set-from-json",
									"objectClass": "subtype",
									"sid": 893392261834864,
									"parameters": {
										"json": "\"{\"\"c3\"\":true,\"\"w\"\":{\"\"x\"\":240,\"\"y\"\":640,\"\"w\"\":150,\"\"h\"\":22,\"\"l\"\":593705883740258,\"\"zi\"\":12,\"\"oX\"\":0,\"\"oY\"\":0},\"\"data\"\":{\"\"title\"\":\"\"\"\",\"\"isEnabled\"\":true,\"\"id\"\":\"\"\"\",\"\"items\"\":[\"\"Дерево 1\"\",\"\"Дерево 2\"\",\"\"Палатка 1\"\",\"\"Палатка 2\"\"],\"\"selectedIndex\"\":-1,\"\"selectedIndices\"\":[]}}\""
									}
								},
								{
									"id": "load",
									"objectClass": "current_subs",
									"sid": 166247580780176,
									"parameters": {
										"json": "decor_subs.AsJSON"
									}
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 287373364484979,
									"parameters": {
										"type": "log",
										"message": "subtype.AsJSON"
									}
								}
							],
							"sid": 190567149155690,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 242721050054045,
											"parameters": {
												"object": "add_ten",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "add_ten",
											"sid": 444658593144589,
											"parameters": {
												"mode": "disabled"
											}
										}
									],
									"sid": 166994680714894
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 933247121409694,
											"parameters": {
												"object": "subtract_ten",
												"instance": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-enabled",
											"objectClass": "subtract_ten",
											"sid": 266446150583431,
											"parameters": {
												"mode": "disabled"
											}
										}
									],
									"sid": 394635892232569
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "Cancel",
							"sid": 463531524141406
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 686394341175588,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 252488860394816,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_READY"
							}
						},
						{
							"id": "destroy",
							"objectClass": "MapElement",
							"sid": 609687151049503
						}
					],
					"sid": 260246465978081
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 411625191942383,
							"parameters": {
								"key": 27
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 341418943810243,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 967959680817512,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_READY"
							}
						},
						{
							"id": "destroy",
							"objectClass": "MapElement",
							"sid": 933917241409718
						}
					],
					"sid": 601371481771976
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-changed",
							"objectClass": "SetAngle",
							"sid": 860971748537862
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 544928675041855,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "Angle_text",
							"sid": 378085656801104,
							"parameters": {
								"text": "\"Угол: \"&SetAngle.Value&\"°\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "MapElement",
							"sid": 917886846159053,
							"parameters": {
								"angle": "SetAngle.Value"
							}
						}
					],
					"sid": 169424146452133
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-changed",
							"objectClass": "SetTurnAngle",
							"sid": 210698451710441
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "road",
							"sid": 177344563535374,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "TurnAngle_text",
							"sid": 910623412094779,
							"parameters": {
								"text": "\"Угол поворота: \"&SetTurnAngle.Value&\"°\""
							}
						}
					],
					"sid": 920021848866214,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "road",
									"sid": 506380173142151,
									"parameters": {
										"object": "SnapZone"
									}
								},
								{
									"id": "is-checked",
									"objectClass": "Snap",
									"sid": 207696850620619
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "road",
									"sid": 290351823929238,
									"parameters": {
										"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
										"from": "beginning"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "road",
									"sid": 325030212022800,
									"parameters": {
										"instance-variable": "TurnAngle",
										"value": "SetTurnAngle.Value"
									}
								},
								{
									"callFunction": "snap",
									"sid": 231695126502012,
									"parameters": [
										"road.UID",
										"SnapZone.UID"
									]
								}
							],
							"sid": 201411401567029
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 508499034630225
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "road",
									"sid": 867047475394110,
									"parameters": {
										"animation": "(SetTurnAngle.Value < 0 ? \"l\": \"r\")&abs(SetTurnAngle.Value)",
										"from": "beginning"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "road",
									"sid": 153205715215040,
									"parameters": {
										"instance-variable": "TurnAngle",
										"value": "SetTurnAngle.Value"
									}
								}
							],
							"sid": 898958257158709
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-selection-changed",
							"objectClass": "type",
							"sid": 264010812865259
						}
					],
					"actions": [
						{
							"callFunction": "UpdateType",
							"sid": 554807925281681,
							"parameters": [
								"type.SelectedIndex"
							]
						}
					],
					"sid": 769499931881027
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "CreateObject",
							"sid": 153988133417860
						},
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 553177375841946,
							"parameters": {
								"key": 13
							}
						}
					],
					"actions": [
						{
							"callFunction": "AddNewObject",
							"sid": 407041993352801
						}
					],
					"sid": 926382990333361,
					"isOrBlock": true
				}
			],
			"sid": 903642033661495
		},
		{
			"functionName": "AddAction",
			"functionDescription": "",
			"functionCategory": "Buffer",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "action_type",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 970195790008646
				},
				{
					"name": "uid",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 162239660971877
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "MapElement",
					"sid": 541750710003614,
					"parameters": {
						"unique-id": "uid"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "changes_buffer",
					"sid": 356633939210582,
					"parameters": {
						"instance-variable": "last_action",
						"value": "Self.current_action"
					}
				},
				{
					"id": "add-to-instvar",
					"objectClass": "changes_buffer",
					"sid": 725598960463836,
					"parameters": {
						"instance-variable": "current_action",
						"value": "1"
					}
				},
				{
					"id": "set-size",
					"objectClass": "changes_buffer",
					"sid": 440401213333214,
					"parameters": {
						"width": "Self.current_action",
						"height": "9",
						"depth": "1"
					}
				},
				{
					"id": "set-at-xy",
					"objectClass": "changes_buffer",
					"sid": 951425925263207,
					"parameters": {
						"x": "Self.last_action",
						"y": "0",
						"value": "action_type"
					}
				},
				{
					"type": "comment",
					"text": "Cell 1 reserved for future"
				},
				{
					"id": "set-at-xy",
					"objectClass": "changes_buffer",
					"sid": 104798787227281,
					"parameters": {
						"x": "Self.last_action",
						"y": "1",
						"value": "0"
					}
				},
				{
					"id": "set-at-xy",
					"objectClass": "changes_buffer",
					"sid": 345529762421812,
					"parameters": {
						"x": "Self.last_action",
						"y": "2",
						"value": "MapElement.ObjectTypeName&\"_\"&MapElement.AnimationName"
					}
				},
				{
					"type": "comment",
					"text": "Disable redo button, since there is nothing to redo"
				},
				{
					"id": "set-enabled",
					"objectClass": "RedoAction",
					"sid": 916052851767511,
					"parameters": {
						"mode": "disabled"
					}
				},
				{
					"id": "set-enabled",
					"objectClass": "UndoAction",
					"sid": 941410306697004,
					"parameters": {
						"mode": "enabled"
					}
				}
			],
			"sid": 758698471912073,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 273925478142925,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_ADD"
							}
						}
					],
					"actions": [
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 282329107058248,
							"parameters": {
								"x": "Self.last_action",
								"y": "6",
								"value": "MapElement.X"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 783986716393318,
							"parameters": {
								"x": "Self.last_action",
								"y": "7",
								"value": "MapElement.Y"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 280270025234693,
							"parameters": {
								"x": "Self.last_action",
								"y": "8",
								"value": "MapElement.Angle"
							}
						}
					],
					"sid": 148500744639638
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 678165447871435,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_MODIFY"
							}
						}
					],
					"actions": [
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 518096120650510,
							"parameters": {
								"x": "Self.last_action",
								"y": "3",
								"value": "MapElement.saved_x"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 600196004572674,
							"parameters": {
								"x": "Self.last_action",
								"y": "4",
								"value": "MapElement.saved_y"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 368468122703131,
							"parameters": {
								"x": "Self.last_action",
								"y": "5",
								"value": "MapElement.saved_angle"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 682619656471298,
							"parameters": {
								"x": "Self.last_action",
								"y": "6",
								"value": "MapElement.X"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 995304298813800,
							"parameters": {
								"x": "Self.last_action",
								"y": "7",
								"value": "MapElement.Y"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 791369719175020,
							"parameters": {
								"x": "Self.last_action",
								"y": "8",
								"value": "MapElement.Angle"
							}
						}
					],
					"sid": 673524777835958
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 810740737109656,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_DELETE"
							}
						}
					],
					"actions": [
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 729584869711110,
							"parameters": {
								"x": "Self.last_action",
								"y": "3",
								"value": "MapElement.X"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 518012909279618,
							"parameters": {
								"x": "Self.last_action",
								"y": "4",
								"value": "MapElement.Y"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "changes_buffer",
							"sid": 860446347611238,
							"parameters": {
								"x": "Self.last_action",
								"y": "5",
								"value": "MapElement.Angle"
							}
						}
					],
					"sid": 749846325925358
				}
			]
		},
		{
			"functionName": "Undo",
			"functionDescription": "",
			"functionCategory": "Buffer",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "subtract-from-instvar",
					"objectClass": "changes_buffer",
					"sid": 882381271455084,
					"parameters": {
						"instance-variable": "current_action",
						"value": "1"
					}
				},
				{
					"id": "set-enabled",
					"objectClass": "RedoAction",
					"sid": 914404962748263,
					"parameters": {
						"mode": "enabled"
					}
				}
			],
			"sid": 489497323245778,
			"children": [
				{
					"eventType": "variable",
					"name": "action_type",
					"type": "string",
					"initialValue": "Add",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 615475341381255
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 856886742755317,
							"parameters": {
								"variable": "action_type",
								"value": "changes_buffer.At(changes_buffer.current_action, 0)"
							}
						}
					],
					"sid": 573041989204161
				},
				{
					"eventType": "comment",
					"text": "Remove added object"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 568657766692246,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_ADD"
							}
						}
					],
					"actions": [
						{
							"callFunction": "RemoveObject",
							"sid": 507475665635213,
							"parameters": [
								"changes_buffer.At(changes_buffer.current_action, 6)",
								"changes_buffer.At(changes_buffer.current_action, 7)"
							]
						}
					],
					"sid": 335061420109615
				},
				{
					"eventType": "comment",
					"text": "Place object on previous place"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 585470790467006,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_MODIFY"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveObject",
							"sid": 213517286676743,
							"parameters": [
								"changes_buffer.At(changes_buffer.current_action, 3)",
								"changes_buffer.At(changes_buffer.current_action, 4)",
								"changes_buffer.At(changes_buffer.current_action, 5)",
								"changes_buffer.At(changes_buffer.current_action, 6)",
								"changes_buffer.At(changes_buffer.current_action, 7)"
							]
						}
					],
					"sid": 235663240652354
				},
				{
					"eventType": "comment",
					"text": "Recreate object"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 385513938119324,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_DELETE"
							}
						}
					],
					"actions": [
						{
							"callFunction": "CreateObject",
							"sid": 800755622326127,
							"parameters": [
								"changes_buffer.At(changes_buffer.current_action, 2)",
								"changes_buffer.At(changes_buffer.current_action, 3)",
								"changes_buffer.At(changes_buffer.current_action, 4)",
								"changes_buffer.At(changes_buffer.current_action, 5)"
							]
						}
					],
					"sid": 855723360751054
				},
				{
					"eventType": "comment",
					"text": "Cannot undo actions anymore"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "changes_buffer",
							"sid": 186029197731234,
							"parameters": {
								"instance-variable": "current_action",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "UndoAction",
							"sid": 897838271527466,
							"parameters": {
								"mode": "disabled"
							}
						}
					],
					"sid": 161204179237229
				}
			]
		},
		{
			"functionName": "Redo",
			"functionDescription": "",
			"functionCategory": "Buffer",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-enabled",
					"objectClass": "UndoAction",
					"sid": 323593415204130,
					"parameters": {
						"mode": "enabled"
					}
				}
			],
			"sid": 414397578749080,
			"children": [
				{
					"eventType": "variable",
					"name": "action_type",
					"type": "string",
					"initialValue": "Add",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 758224509550796
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 542270252899342,
							"parameters": {
								"variable": "action_type",
								"value": "changes_buffer.At(changes_buffer.current_action, 0)"
							}
						}
					],
					"sid": 479361468410806
				},
				{
					"eventType": "comment",
					"text": "Remove previously deleted object"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 667591164907480,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_DELETE"
							}
						}
					],
					"actions": [
						{
							"callFunction": "RemoveObject",
							"sid": 789092121784609,
							"parameters": [
								"changes_buffer.At(changes_buffer.current_action, 3)",
								"changes_buffer.At(changes_buffer.current_action, 4)"
							]
						}
					],
					"sid": 993691889435198
				},
				{
					"eventType": "comment",
					"text": "Place object on new place"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 606642867633451,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_MODIFY"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveObject",
							"sid": 434441254724466,
							"parameters": [
								"changes_buffer.At(changes_buffer.current_action, 6)",
								"changes_buffer.At(changes_buffer.current_action, 7)",
								"changes_buffer.At(changes_buffer.current_action, 8)",
								"changes_buffer.At(changes_buffer.current_action, 3)",
								"changes_buffer.At(changes_buffer.current_action, 4)"
							]
						}
					],
					"sid": 182761227730241
				},
				{
					"eventType": "comment",
					"text": "Recreate object"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 857808834268377,
							"parameters": {
								"variable": "action_type",
								"comparison": 0,
								"value": "ACTION_ADD"
							}
						}
					],
					"actions": [
						{
							"callFunction": "CreateObject",
							"sid": 574403988461828,
							"parameters": [
								"changes_buffer.At(changes_buffer.current_action, 2)",
								"changes_buffer.At(changes_buffer.current_action, 6)",
								"changes_buffer.At(changes_buffer.current_action, 7)",
								"changes_buffer.At(changes_buffer.current_action, 8)"
							]
						}
					],
					"sid": 935604964788946
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "add-to-instvar",
							"objectClass": "changes_buffer",
							"sid": 924738408408538,
							"parameters": {
								"instance-variable": "current_action",
								"value": "1"
							}
						}
					],
					"sid": 821534450129434
				},
				{
					"eventType": "comment",
					"text": "Cannot redo actions anymore"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "changes_buffer",
							"sid": 684057520046978,
							"parameters": {
								"instance-variable": "current_action",
								"comparison": 4,
								"value": "Self.last_action"
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "RedoAction",
							"sid": 325758153910231,
							"parameters": {
								"mode": "disabled"
							}
						}
					],
					"sid": 249171665232046
				}
			]
		},
		{
			"functionName": "AddSnapZones",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "road_uid",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 990564603193399
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "road",
					"sid": 796292226795319,
					"parameters": {
						"unique-id": "road_uid"
					}
				}
			],
			"actions": [
				{
					"id": "alert",
					"objectClass": "Browser",
					"sid": 716725173556750,
					"disabled": true,
					"parameters": {
						"message": "road_uid&newline&road.snapped_start&\" \"&road.snapped_end"
					}
				}
			],
			"sid": 682648869475086,
			"children": [
				{
					"eventType": "comment",
					"text": "Delete old snap zones if present"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 114517649122353,
							"parameters": {
								"object": "SnapZone",
								"expression": "SnapZone.snap_to",
								"comparison": 0,
								"value": "road.UID"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "SnapZone",
							"sid": 957537413164670,
							"parameters": {
								"instance-variable": "about_to_destroy",
								"value": "true"
							}
						},
						{
							"id": "destroy",
							"objectClass": "SnapZone",
							"sid": 755957666134967
						}
					],
					"sid": 705145718550602
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "road",
							"sid": 523948741253105,
							"parameters": {
								"instance-variable": "snapped_start",
								"comparison": 0,
								"value": "-1"
							}
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "road",
							"sid": 323049491906208,
							"parameters": {
								"object": "SnapZone",
								"layer": "\"Level\"",
								"image-point": "\"Start\"",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-angle",
							"objectClass": "SnapZone",
							"sid": 290752037985321,
							"parameters": {
								"angle": "road.Angle + 180"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "SnapZone",
							"sid": 516229857052673,
							"parameters": {
								"instance-variable": "isEnd",
								"value": "false"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "SnapZone",
							"sid": 212741105335693,
							"parameters": {
								"instance-variable": "snap_to",
								"value": "road.UID"
							}
						},
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 882881634761333,
							"disabled": true,
							"parameters": {
								"message": "SnapZone.UID&\" \"&SnapZone.isEnd&\" \"&SnapZone.snap_to"
							}
						}
					],
					"sid": 763250530207547
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "road",
							"sid": 895467508815247,
							"parameters": {
								"instance-variable": "snapped_end",
								"comparison": 0,
								"value": "-1"
							}
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "road",
							"sid": 311452706044728,
							"parameters": {
								"object": "SnapZone",
								"layer": "\"Level\"",
								"image-point": "\"End\"",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-angle",
							"objectClass": "SnapZone",
							"sid": 152468534495217,
							"parameters": {
								"angle": "road.Angle + road.TurnAngle"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "SnapZone",
							"sid": 631027549441290,
							"parameters": {
								"instance-variable": "isEnd",
								"value": "true"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "SnapZone",
							"sid": 417095758940733,
							"parameters": {
								"instance-variable": "snap_to",
								"value": "road.UID"
							}
						},
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 967827670160603,
							"disabled": true,
							"parameters": {
								"message": "SnapZone.UID&\" \"&SnapZone.isEnd&\" \"&SnapZone.snap_to"
							}
						}
					],
					"sid": 109173065961652
				}
			]
		},
		{
			"functionName": "MoveObject",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 496981391836090
				},
				{
					"name": "y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 666964528457090
				},
				{
					"name": "new_angle",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 164947833415302
				},
				{
					"name": "old_x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 123847913834828
				},
				{
					"name": "old_y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 846621576445639
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 425751430849304,
			"children": [
				{
					"eventType": "variable",
					"name": "obj_str",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 671673665721306
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 583924421245406,
							"parameters": {
								"object": "MapElement",
								"expression": "distance(MapElement.X, MapElement.Y, old_x, old_y)",
								"comparison": 2,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 242452032697682,
							"parameters": {
								"variable": "obj_str",
								"value": "MapElement.ObjectTypeName&\"_\"&MapElement.AnimationName"
							}
						}
					],
					"sid": 745343147522966,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 646082138180193,
									"parameters": {
										"first-value": "MapElement.ObjectTypeName",
										"comparison": 0,
										"second-value": "\"road\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "RemoveObject",
									"sid": 355285285272258,
									"parameters": [
										"old_x",
										"old_y"
									]
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 355480559682034,
									"parameters": {
										"seconds": "dt"
									}
								},
								{
									"callFunction": "CreateObject",
									"sid": 173026667420402,
									"parameters": [
										"obj_str",
										"x",
										"y",
										"new_angle"
									]
								}
							],
							"sid": 714047911621857
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 709410332963766
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "MapElement",
									"sid": 331008312339169,
									"parameters": {
										"x": "x",
										"y": "y"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "MapElement",
									"sid": 161274237814114,
									"parameters": {
										"angle": "new_angle"
									}
								}
							],
							"sid": 748729876351632
						}
					]
				}
			]
		},
		{
			"functionName": "RemoveObject",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 134552724530471
				},
				{
					"name": "y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 680196601620587
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 456008044770153,
			"children": [
				{
					"eventType": "comment",
					"text": "Remove added object"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 853102052219687,
							"parameters": {
								"object": "MapElement",
								"expression": "distance(MapElement.X, MapElement.Y, x, y)",
								"comparison": 2,
								"value": "1"
							}
						}
					],
					"actions": [],
					"sid": 516678623741976,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 614087579379461,
									"parameters": {
										"first-value": "MapElement.ObjectTypeName",
										"comparison": 0,
										"second-value": "\"road\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "AddSnapZones",
									"sid": 585042488942698,
									"disabled": true,
									"parameters": [
										"MapElement.UID"
									]
								}
							],
							"sid": 200440122847096,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 428660133563033,
											"parameters": {
												"object": "SnapZone",
												"expression": "SnapZone.snap_to",
												"comparison": 0,
												"value": "MapElement.UID"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "SnapZone",
											"sid": 650232113144542,
											"parameters": {
												"instance-variable": "about_to_destroy",
												"value": "true"
											}
										},
										{
											"id": "destroy",
											"objectClass": "SnapZone",
											"sid": 264031384801480
										}
									],
									"sid": 690453955425808
								},
								{
									"eventType": "variable",
									"name": "r2",
									"type": "number",
									"initialValue": "-1",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 750612911593556
								},
								{
									"eventType": "variable",
									"name": "r1",
									"type": "number",
									"initialValue": "-1",
									"comment": "",
									"isStatic": true,
									"isConstant": false,
									"sid": 392316616587368
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "road",
											"sid": 525801880582470,
											"parameters": {
												"unique-id": "MapElement.UID"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 997175779468766,
											"parameters": {
												"variable": "r1",
												"value": "road.snapped_start"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 270011472982718,
											"parameters": {
												"variable": "r2",
												"value": "road.snapped_end"
											}
										}
									],
									"sid": 776670483837036
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "MapElement",
											"sid": 715497020077472
										},
										{
											"id": "alert",
											"objectClass": "Browser",
											"sid": 462759913284365,
											"disabled": true,
											"parameters": {
												"message": "\"Delete\"&newline&r1&newline&r2"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 193358985102875,
											"disabled": true,
											"parameters": {
												"seconds": "dt"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 737382421459081,
											"disabled": true
										},
										{
											"id": "signal",
											"objectClass": "System",
											"sid": 341678026304094,
											"disabled": true,
											"parameters": {
												"tag": "\"destroyed1\""
											}
										},
										{
											"id": "signal",
											"objectClass": "System",
											"sid": 435225998201102,
											"disabled": true,
											"parameters": {
												"tag": "\"destroyed2\""
											}
										}
									],
									"sid": 357303181066650,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 691604385716722,
													"parameters": {
														"variable": "r1",
														"comparison": 1,
														"value": "-1"
													}
												},
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 272962364475377,
													"parameters": {
														"object": "road"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "road",
													"sid": 848074012264776,
													"parameters": {
														"unique-id": "r1"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "road",
													"sid": 814031680279181,
													"parameters": {
														"instance-variable": "snapped_end",
														"value": "-1"
													}
												},
												{
													"callFunction": "AddSnapZones",
													"sid": 688806125560867,
													"parameters": [
														"r1"
													]
												}
											],
											"sid": 213231178604258
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 566382606969151,
													"parameters": {
														"variable": "r2",
														"comparison": 1,
														"value": "-1"
													}
												},
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 762929502434161,
													"parameters": {
														"object": "road"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "road",
													"sid": 223732462650630,
													"parameters": {
														"unique-id": "r2"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "road",
													"sid": 445531317867508,
													"parameters": {
														"instance-variable": "snapped_start",
														"value": "-1"
													}
												},
												{
													"callFunction": "AddSnapZones",
													"sid": 498826209689627,
													"parameters": [
														"r2"
													]
												}
											],
											"sid": 738710492433746
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 780765512559827
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "MapElement",
									"sid": 778776177877632
								}
							],
							"sid": 808755471332528
						}
					]
				}
			]
		},
		{
			"functionName": "CreateObject",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "object_string",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 549408920938319
				},
				{
					"name": "x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 404742925794666
				},
				{
					"name": "y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 209853639067570
				},
				{
					"name": "new_angle",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 918689208697120
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 620701370934290,
			"children": [
				{
					"eventType": "variable",
					"name": "object_animation",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 350663757101768
				},
				{
					"eventType": "variable",
					"name": "object_type",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 285235856655719
				},
				{
					"eventType": "variable",
					"name": "new_uid",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 238353350333668
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 728991286683296,
							"parameters": {
								"variable": "object_type",
								"value": "tokenat(object_string, 0, \"_\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 905739740648148,
							"parameters": {
								"variable": "object_animation",
								"value": "tokenat(object_string, 1, \"_\")"
							}
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 724609899388440,
							"parameters": {
								"object-name": "object_type",
								"layer": "\"Level\"",
								"x": "x",
								"y": "y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 491315804471169,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 516171367171182,
									"parameters": {
										"object": "MapElement"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 236704413058141,
									"parameters": {
										"variable": "new_uid",
										"value": "MapElement.UID"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "MapElement",
									"sid": 841152667282856,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "MapElement",
									"sid": 644324229983992,
									"parameters": {
										"instance-variable": "placed",
										"value": "true"
									}
								},
								{
									"id": "set-effect-enabled",
									"objectClass": "MapElement",
									"sid": 654169300449643,
									"parameters": {
										"mode": "disable",
										"effect": "\"TintRed\""
									}
								},
								{
									"id": "set-angle",
									"objectClass": "MapElement",
									"sid": 535725900100696,
									"parameters": {
										"angle": "new_angle"
									}
								},
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 873271620849676,
									"disabled": true,
									"parameters": {
										"message": "changes_buffer.At(changes_buffer.current_action, 5)"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "MapElement",
									"sid": 706748916986632,
									"parameters": {
										"animation": "object_animation",
										"from": "beginning"
									}
								},
								{
									"id": "set-position",
									"objectClass": "MapElement",
									"sid": 512117348548718,
									"parameters": {
										"x": "x",
										"y": "y"
									}
								}
							],
							"sid": 747808774843958,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 879644124249591,
											"parameters": {
												"first-value": "MapElement.ObjectTypeName",
												"comparison": 0,
												"second-value": "\"road\""
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "road",
											"sid": 799080108993030,
											"parameters": {
												"unique-id": "new_uid"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "road",
											"sid": 276546994691964,
											"parameters": {
												"instance-variable": "TurnAngle",
												"value": "(left(object_animation, 1) = \"l\" ? -1 : 1) * int(right(object_animation, len(object_animation)-1))"
											}
										}
									],
									"sid": 162220564443334,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "road",
													"sid": 821972840293206,
													"parameters": {
														"object": "SnapZone"
													}
												},
												{
													"id": "for-each",
													"objectClass": "System",
													"sid": 841319518471207,
													"parameters": {
														"object": "SnapZone"
													}
												}
											],
											"actions": [],
											"sid": 981299215572966,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "SnapZone",
															"sid": 518637196122019,
															"parameters": {
																"instance-variable": "about_to_destroy"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "alert",
															"objectClass": "Browser",
															"sid": 927382048687714,
															"disabled": true,
															"parameters": {
																"message": "\"Snap: \"&road.UID&\" \"&SnapZone.UID"
															}
														},
														{
															"callFunction": "snap",
															"sid": 603597254945246,
															"parameters": [
																"road.UID",
																"SnapZone.UID"
															]
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "SnapZone",
															"sid": 166152111575897,
															"parameters": {
																"instance-variable": "about_to_destroy",
																"value": "true"
															}
														},
														{
															"id": "destroy",
															"objectClass": "SnapZone",
															"sid": 212088457407890
														}
													],
													"sid": 325442686945882
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "AddSnapZones",
													"sid": 953694150604643,
													"parameters": [
														"road.UID"
													]
												},
												{
													"id": "alert",
													"objectClass": "Browser",
													"sid": 517470525021203,
													"disabled": true,
													"parameters": {
														"message": "\"create\"&newline&road.snapped_start&newline&road.snapped_end"
													}
												}
											],
											"sid": 434506963901272
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "GUI_modify",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "add_ten",
							"sid": 337920110102100
						}
					],
					"actions": [],
					"sid": 408790823824617,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "add_ten",
									"sid": 984305145729245,
									"parameters": {
										"unique-id": "65"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "MapElement",
									"sid": 821663760772386,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-value",
									"objectClass": "SetAngle",
									"sid": 193186381187594,
									"parameters": {
										"value": "clamp(Self.Value + 10, Self.Minimum, Self.Maximum)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "Angle_text",
									"sid": 639070280275851,
									"parameters": {
										"text": "\"Угол: \"&SetAngle.Value&\"°\""
									}
								},
								{
									"id": "set-angle",
									"objectClass": "MapElement",
									"sid": 611767501004101,
									"parameters": {
										"angle": "SetAngle.Value"
									}
								},
								{
									"callFunction": "check_placed",
									"sid": 431992255150985,
									"parameters": [
										"MapElement.UID"
									]
								},
								{
									"id": "set-value",
									"objectClass": "SetAngle",
									"sid": 506557245191629,
									"parameters": {
										"value": "MapElement.Angle > 180 ? MapElement.Angle - 360 : MapElement.Angle"
									}
								},
								{
									"id": "set-text",
									"objectClass": "Angle_text",
									"sid": 733312754608406,
									"parameters": {
										"text": "\"Угол: \"&SetAngle.Value&\"°\""
									}
								}
							],
							"sid": 884452693836216
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "subtract_ten",
							"sid": 982356251804798
						}
					],
					"actions": [],
					"sid": 996661900963495,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "subtract_ten",
									"sid": 925858206058156,
									"parameters": {
										"unique-id": "64"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "MapElement",
									"sid": 748696582907053,
									"parameters": {
										"unique-id": "EditUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-value",
									"objectClass": "SetAngle",
									"sid": 334673391354042,
									"parameters": {
										"value": "clamp(Self.Value - 10, Self.Minimum, Self.Maximum)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "Angle_text",
									"sid": 482467193505539,
									"parameters": {
										"text": "\"Угол: \"&SetAngle.Value&\"°\""
									}
								},
								{
									"id": "set-angle",
									"objectClass": "MapElement",
									"sid": 840767046222618,
									"parameters": {
										"angle": "SetAngle.Value"
									}
								},
								{
									"callFunction": "check_placed",
									"sid": 636919268366814,
									"parameters": [
										"MapElement.UID"
									]
								},
								{
									"id": "set-value",
									"objectClass": "SetAngle",
									"sid": 313435649159469,
									"parameters": {
										"value": "MapElement.Angle > 180 ? MapElement.Angle - 360 : MapElement.Angle"
									}
								},
								{
									"id": "set-text",
									"objectClass": "Angle_text",
									"sid": 501620394688596,
									"parameters": {
										"text": "\"Угол: \"&SetAngle.Value&\"°\""
									}
								}
							],
							"sid": 107324099162256
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-changed",
							"objectClass": "SetAngle",
							"sid": 614667738511500
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 330498911841105,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "Angle_text",
							"sid": 569077391277552,
							"parameters": {
								"text": "\"Угол: \"&SetAngle.Value&\"°\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "MapElement",
							"sid": 194782838536415,
							"parameters": {
								"angle": "SetAngle.Value"
							}
						}
					],
					"sid": 629108601749795
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "DestroyObject",
							"sid": 445193644168063
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 846610152810331,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "If element was moved during edit, get it back where it was to delete correctly"
						},
						{
							"id": "set-angle",
							"objectClass": "MapElement",
							"sid": 514938658564153,
							"parameters": {
								"angle": "Self.saved_angle"
							}
						},
						{
							"id": "set-position",
							"objectClass": "MapElement",
							"sid": 246709272580458,
							"parameters": {
								"x": "Self.saved_x",
								"y": "Self.saved_y"
							}
						}
					],
					"sid": 247458149420623,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 730724711488563,
									"parameters": {
										"first-value": "MapElement.ObjectTypeName",
										"comparison": 0,
										"second-value": "\"road\""
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "MapElement",
									"sid": 821974994028793,
									"parameters": {
										"animation": "\"Finish\""
									}
								}
							],
							"actions": [
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 630857991524302,
									"parameters": {
										"message": "\"Нельзя удалять старт/финиш - тогда трассы не получится!\""
									}
								}
							],
							"sid": 635869759904504
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 506304520903934
								}
							],
							"actions": [
								{
									"callFunction": "AddAction",
									"sid": 833444800399826,
									"parameters": [
										"ACTION_DELETE",
										"MapElement.UID"
									]
								},
								{
									"callFunction": "RemoveObject",
									"sid": 691193792424141,
									"parameters": [
										"MapElement.X",
										"MapElement.Y"
									]
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 803279621519590,
									"parameters": {
										"variable": "EdState",
										"value": "EDITOR_READY"
									}
								}
							],
							"sid": 662985697820297
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "CreateObject",
							"sid": 200384510668524
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 573598977650004,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"callFunction": "DeselectObject",
							"sid": 211032357414132,
							"parameters": [
								"MapElement.UID"
							]
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 588412996126668,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_READY"
							}
						}
					],
					"sid": 490508524477581
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 672350287979709,
							"parameters": {
								"key": 13
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 330210096377055,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"callFunction": "DeselectObject",
							"sid": 933063095451287,
							"parameters": [
								"MapElement.UID"
							]
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 135401825834016,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_READY"
							}
						}
					],
					"sid": 135956536344479
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-clicked",
							"objectClass": "Cancel",
							"sid": 867591610605210
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 126950172224789,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "MapElement",
							"sid": 127045383198409,
							"parameters": {
								"angle": "Self.saved_angle"
							}
						},
						{
							"id": "set-position",
							"objectClass": "MapElement",
							"sid": 573398484779766,
							"parameters": {
								"x": "Self.saved_x",
								"y": "Self.saved_y"
							}
						},
						{
							"callFunction": "DeselectObject",
							"sid": 432062541650365,
							"parameters": [
								"MapElement.UID"
							]
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 327965565487919,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_READY"
							}
						}
					],
					"sid": 737330010671357
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 662822673642472,
							"parameters": {
								"key": 27
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "MapElement",
							"sid": 330277006407768,
							"parameters": {
								"unique-id": "EditUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "MapElement",
							"sid": 488155755058515,
							"parameters": {
								"angle": "Self.saved_angle"
							}
						},
						{
							"id": "set-position",
							"objectClass": "MapElement",
							"sid": 106206269519436,
							"parameters": {
								"x": "Self.saved_x",
								"y": "Self.saved_y"
							}
						},
						{
							"callFunction": "DeselectObject",
							"sid": 349667823454635,
							"parameters": [
								"MapElement.UID"
							]
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 609002958419262,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_READY"
							}
						}
					],
					"sid": 328438666217900
				}
			],
			"sid": 670847739112696
		},
		{
			"functionName": "SelectObject",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "uid",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 220212565351630
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "MapElement",
					"sid": 465158960379215,
					"parameters": {
						"unique-id": "uid"
					}
				},
				{
					"id": "pick-by-unique-id",
					"objectClass": "SetAngle",
					"sid": 941643001231877,
					"parameters": {
						"unique-id": "63"
					}
				},
				{
					"id": "pick-by-unique-id",
					"objectClass": "Angle_text",
					"sid": 729799738109868,
					"parameters": {
						"unique-id": "66"
					}
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 215145191835911,
					"parameters": {
						"variable": "EditUID",
						"value": "MapElement.UID"
					}
				},
				{
					"id": "set-opacity",
					"objectClass": "MapElement",
					"sid": 888625453710858,
					"parameters": {
						"opacity": "60"
					}
				},
				{
					"id": "set-effect-enabled",
					"objectClass": "MapElement",
					"sid": 680047676455094,
					"parameters": {
						"mode": "enable",
						"effect": "\"TintSelected\""
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "MapElement",
					"sid": 785875189178562,
					"parameters": {
						"instance-variable": "selected",
						"value": "true"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "MapElement",
					"sid": 617535099574464,
					"parameters": {
						"instance-variable": "placed",
						"value": "false"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "MapElement",
					"sid": 153978250267740,
					"parameters": {
						"instance-variable": "saved_x",
						"value": "Self.X"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "MapElement",
					"sid": 895608315365855,
					"parameters": {
						"instance-variable": "saved_y",
						"value": "Self.Y"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "MapElement",
					"sid": 755720529879313,
					"parameters": {
						"instance-variable": "saved_angle",
						"value": "Self.Angle"
					}
				},
				{
					"id": "set-enabled",
					"objectClass": "MapElement",
					"sid": 396616488949739,
					"behaviorType": "DragDrop",
					"parameters": {
						"state": "enabled"
					}
				},
				{
					"id": "set-value",
					"objectClass": "SetAngle",
					"sid": 852568030028719,
					"parameters": {
						"value": "MapElement.Angle > 180 ? MapElement.Angle - 360 : MapElement.Angle"
					}
				},
				{
					"id": "set-text",
					"objectClass": "Angle_text",
					"sid": 273299986264209,
					"parameters": {
						"text": "\"Угол: \"&SetAngle.Value&\"°\""
					}
				},
				{
					"id": "move-to-object",
					"objectClass": "MapElement",
					"sid": 663242191984864,
					"parameters": {
						"where": "in-front",
						"object": "road"
					}
				}
			],
			"sid": 543444421275037,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 801231430101481,
							"parameters": {
								"first-value": "MapElement.ObjectTypeName",
								"comparison": 0,
								"second-value": "\"road\""
							}
						}
					],
					"actions": [],
					"sid": 113327372645616,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 824672104031875,
									"parameters": {
										"object": "SnapZone",
										"expression": "SnapZone.snap_to",
										"comparison": 0,
										"value": "MapElement.UID"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "SnapZone",
									"sid": 300390964796691,
									"parameters": {
										"instance-variable": "about_to_destroy",
										"value": "true"
									}
								},
								{
									"id": "destroy",
									"objectClass": "SnapZone",
									"sid": 195825979363472
								}
							],
							"sid": 702562266204063
						},
						{
							"eventType": "variable",
							"name": "r2",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 434824345014691
						},
						{
							"eventType": "variable",
							"name": "r1",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"isStatic": true,
							"isConstant": false,
							"sid": 585607170789419
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 140551856933739,
									"parameters": {
										"unique-id": "MapElement.UID"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 755913127834565,
									"parameters": {
										"variable": "r1",
										"value": "road.snapped_start"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 847597865149865,
									"parameters": {
										"variable": "r2",
										"value": "road.snapped_end"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "road",
									"sid": 998013317575700,
									"parameters": {
										"instance-variable": "snapped_start",
										"value": "-1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "road",
									"sid": 146383836438099,
									"parameters": {
										"instance-variable": "snapped_end",
										"value": "-1"
									}
								}
							],
							"sid": 521767559451826
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-collisions-enabled",
									"objectClass": "MapElement",
									"sid": 270607582754222,
									"disabled": true,
									"parameters": {
										"collisions": "disabled"
									}
								},
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 879524088570544,
									"disabled": true,
									"parameters": {
										"message": "\"Selected\"&newline&r1&newline&r2"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 662318905411132,
									"disabled": true,
									"parameters": {
										"seconds": "dt"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 245238267317492,
									"disabled": true
								},
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 119365628693533,
									"disabled": true,
									"parameters": {
										"tag": "\"destroyed1\""
									}
								},
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 105388702683891,
									"disabled": true,
									"parameters": {
										"tag": "\"destroyed2\""
									}
								}
							],
							"sid": 257882770306911,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 865348393793680,
											"parameters": {
												"variable": "r1",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 664445300980908,
											"parameters": {
												"object": "road"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "road",
											"sid": 624034913046997,
											"parameters": {
												"unique-id": "r1"
											}
										}
									],
									"actions": [
										{
											"id": "wait-for-signal",
											"objectClass": "System",
											"sid": 754383928091485,
											"disabled": true,
											"parameters": {
												"tag": "\"destroyed1\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "road",
											"sid": 300499359453403,
											"parameters": {
												"instance-variable": "snapped_end",
												"value": "-1"
											}
										},
										{
											"callFunction": "AddSnapZones",
											"sid": 196248632900968,
											"parameters": [
												"r1"
											]
										}
									],
									"sid": 747374496852055
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 742737744875843,
											"parameters": {
												"variable": "r2",
												"comparison": 1,
												"value": "-1"
											}
										},
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 566964193710901,
											"parameters": {
												"object": "road"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "road",
											"sid": 579435108877432,
											"parameters": {
												"unique-id": "r2"
											}
										}
									],
									"actions": [
										{
											"id": "wait-for-signal",
											"objectClass": "System",
											"sid": 122443928006757,
											"disabled": true,
											"parameters": {
												"tag": "\"destroyed2\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "road",
											"sid": 638513296839210,
											"parameters": {
												"instance-variable": "snapped_start",
												"value": "-1"
											}
										},
										{
											"callFunction": "AddSnapZones",
											"sid": 474425961851901,
											"parameters": [
												"r2"
											]
										}
									],
									"sid": 535361316325079
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-collisions-enabled",
											"objectClass": "MapElement",
											"sid": 667813840706122,
											"parameters": {
												"collisions": "enabled"
											}
										}
									],
									"sid": 872478081386959,
									"disabled": true
								}
							]
						}
					]
				}
			]
		},
		{
			"functionName": "DeselectObject",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "uid",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 748041610216584
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "MapElement",
					"sid": 957905542519378,
					"parameters": {
						"unique-id": "uid"
					}
				}
			],
			"actions": [
				{
					"id": "set-opacity",
					"objectClass": "MapElement",
					"sid": 906536070211051,
					"parameters": {
						"opacity": "100"
					}
				},
				{
					"id": "set-effect-enabled",
					"objectClass": "MapElement",
					"sid": 124467566002344,
					"parameters": {
						"mode": "disable",
						"effect": "\"TintSelected\""
					}
				},
				{
					"id": "set-enabled",
					"objectClass": "MapElement",
					"sid": 869383873646182,
					"behaviorType": "DragDrop",
					"parameters": {
						"state": "disabled"
					}
				}
			],
			"sid": 829312659804264,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "MapElement",
							"sid": 262725874411639,
							"parameters": {
								"instance-variable": "saved_angle",
								"comparison": 1,
								"value": "Self.Angle"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "MapElement",
							"sid": 771698156428032,
							"parameters": {
								"instance-variable": "saved_x",
								"comparison": 1,
								"value": "Self.X"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "MapElement",
							"sid": 137872151533824,
							"parameters": {
								"instance-variable": "saved_y",
								"comparison": 1,
								"value": "Self.Y"
							}
						}
					],
					"actions": [
						{
							"callFunction": "AddAction",
							"sid": 110600260332366,
							"parameters": [
								"ACTION_MODIFY",
								"MapElement.UID"
							]
						}
					],
					"sid": 793238886394060,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 267997091459828,
							"parameters": {
								"first-value": "MapElement.ObjectTypeName",
								"comparison": 0,
								"second-value": "\"road\""
							}
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 291720681065395,
							"parameters": {
								"object": "road",
								"expression": "road.selected",
								"comparison": 0,
								"value": "1"
							}
						}
					],
					"actions": [],
					"sid": 957385893635343,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "road",
									"sid": 231186236066339,
									"parameters": {
										"object": "SnapZone"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "SnapZone",
									"sid": 219409248578953,
									"parameters": {
										"instance-variable": "about_to_destroy",
										"value": "true"
									}
								},
								{
									"id": "destroy",
									"objectClass": "SnapZone",
									"sid": 661346249201319
								}
							],
							"sid": 989630019141556
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "AddSnapZones",
									"sid": 133124408188322,
									"parameters": [
										"MapElement.UID"
									]
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "MapElement",
									"sid": 910904370527443,
									"parameters": {
										"instance-variable": "selected",
										"value": "false"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "MapElement",
									"sid": 252968471213023,
									"parameters": {
										"instance-variable": "placed",
										"value": "true"
									}
								}
							],
							"sid": 669333237871164
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 340674894260507
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "MapElement",
							"sid": 178668759272954,
							"parameters": {
								"instance-variable": "selected",
								"value": "false"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "MapElement",
							"sid": 831810556557046,
							"parameters": {
								"instance-variable": "placed",
								"value": "true"
							}
						}
					],
					"sid": 283357577860407
				}
			]
		},
		{
			"functionName": "AddNewObject",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "MapElement",
					"sid": 548849318869956,
					"parameters": {
						"unique-id": "EditUID"
					}
				},
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "MapElement",
					"sid": 691160501050985,
					"parameters": {
						"instance-variable": "can_place"
					}
				}
			],
			"actions": [
				{
					"callFunction": "AddAction",
					"sid": 104121001357396,
					"parameters": [
						"ACTION_ADD",
						"MapElement.UID"
					]
				}
			],
			"sid": 433229988356258,
			"children": [
				{
					"eventType": "variable",
					"name": "obj_str",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 107400987146013
				},
				{
					"eventType": "variable",
					"name": "y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 876655677339985
				},
				{
					"eventType": "variable",
					"name": "x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 534200015636245
				},
				{
					"eventType": "variable",
					"name": "new_angle",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 560391685714799
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 370112519122243,
							"parameters": {
								"variable": "x",
								"value": "MapElement.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 611513614883109,
							"parameters": {
								"variable": "y",
								"value": "MapElement.Y"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 373576551183416,
							"parameters": {
								"variable": "new_angle",
								"value": "MapElement.Angle"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 893013202886708,
							"parameters": {
								"variable": "obj_str",
								"value": "MapElement.ObjectTypeName&\"_\"&MapElement.AnimationName"
							}
						},
						{
							"id": "destroy",
							"objectClass": "MapElement",
							"sid": 546865763572257
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 229518213524473,
							"parameters": {
								"seconds": "dt"
							}
						},
						{
							"callFunction": "CreateObject",
							"sid": 386400783788955,
							"parameters": [
								"obj_str",
								"x",
								"y",
								"new_angle"
							]
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 284204968124912,
							"parameters": {
								"variable": "EdState",
								"value": "EDITOR_READY"
							}
						}
					],
					"sid": 417671886121432
				}
			]
		},
		{
			"functionName": "ChangeAngle",
			"functionDescription": "",
			"functionCategory": "Logic",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "Delta",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 931299407106762
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "MapElement",
					"sid": 366628063558597,
					"parameters": {
						"unique-id": "EditUID"
					}
				}
			],
			"actions": [
				{
					"id": "set-angle",
					"objectClass": "MapElement",
					"sid": 599975609406154,
					"parameters": {
						"angle": "MapElement.Angle + Delta"
					}
				},
				{
					"callFunction": "check_placed",
					"sid": 857722979522573,
					"parameters": [
						"MapElement.UID"
					]
				},
				{
					"id": "set-value",
					"objectClass": "SetAngle",
					"sid": 933329657804505,
					"parameters": {
						"value": "MapElement.Angle > 180 ? MapElement.Angle - 360 : MapElement.Angle"
					}
				},
				{
					"id": "set-text",
					"objectClass": "Angle_text",
					"sid": 598595886239897,
					"parameters": {
						"text": "\"Угол: \"&SetAngle.Value&\"°\""
					}
				}
			],
			"sid": 919411223839210
		},
		{
			"eventType": "comment",
			"text": "Saving project format:\n1. Number of segments that form the track\n2. Track segments - starting from finish/start segment till ending segment\n3. All other objects on top of that"
		},
		{
			"functionName": "SaveProject",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-size",
					"objectClass": "ThisLvl",
					"sid": 245434981989933,
					"parameters": {
						"width": "2",
						"height": "5",
						"depth": "1"
					}
				}
			],
			"sid": 309995402693282,
			"children": [
				{
					"eventType": "variable",
					"name": "error",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Boolean to check whether should we abort saving map",
					"isStatic": false,
					"isConstant": false,
					"sid": 845930074030920
				},
				{
					"eventType": "comment",
					"text": "Start assuming we have a complete circle track"
				},
				{
					"eventType": "variable",
					"name": "complete_track",
					"type": "boolean",
					"initialValue": "true",
					"comment": "Boolean to check whether  or not we have a complete track built",
					"isStatic": false,
					"isConstant": false,
					"sid": 322505606848233
				},
				{
					"eventType": "variable",
					"name": "finish_id",
					"type": "number",
					"initialValue": "0",
					"comment": "Finish segment UID",
					"isStatic": false,
					"isConstant": false,
					"sid": 412079970955723
				},
				{
					"eventType": "variable",
					"name": "next_id",
					"type": "number",
					"initialValue": "0",
					"comment": "UID of the next segment to add",
					"isStatic": false,
					"isConstant": false,
					"sid": 739939406840464
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 714467858706036,
							"parameters": {
								"variable": "MapSlot",
								"comparison": 0,
								"value": "-1"
							}
						}
					],
					"actions": [
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 892441206212988,
							"parameters": {
								"message": "\"Сохраняться во время Preview? Сильно...\""
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 914326452880152,
							"parameters": {
								"variable": "error",
								"value": "true"
							}
						}
					],
					"sid": 633800850670165
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 900064874084519,
							"parameters": {
								"object": "road",
								"expression": "road.AnimationName",
								"comparison": 0,
								"value": "\"Finish\""
							}
						}
					],
					"actions": [
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 510401031523117,
							"parameters": {
								"x": "0",
								"y": "0",
								"value": "1"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 817517078553147,
							"parameters": {
								"x": "1",
								"y": "0",
								"value": "road.UID"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 711319139971651,
							"parameters": {
								"x": "1",
								"y": "1",
								"value": "\"road_Finish\""
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 616846589495035,
							"parameters": {
								"x": "1",
								"y": "2",
								"value": "road.X"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 218966155943859,
							"parameters": {
								"x": "1",
								"y": "3",
								"value": "road.Y"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 734956541624890,
							"parameters": {
								"x": "1",
								"y": "4",
								"value": "road.Angle"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 902644439475073,
							"parameters": {
								"variable": "finish_id",
								"value": "road.UID"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 898569639334385,
							"parameters": {
								"variable": "next_id",
								"value": "road.snapped_end"
							}
						},
						{
							"type": "comment",
							"text": "Set placed to false for later checks"
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "road",
							"sid": 106304200720551,
							"parameters": {
								"instance-variable": "placed",
								"value": "false"
							}
						}
					],
					"sid": 561238318144984
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 955069621015087
						}
					],
					"actions": [
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 918654596145188,
							"parameters": {
								"message": "\"Не удалось найти сегмент старта/финиша. Какого...?\""
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 743978916668930,
							"parameters": {
								"variable": "error",
								"value": "true"
							}
						}
					],
					"sid": 429465890505683
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 417207785445935,
							"parameters": {
								"variable": "error"
							},
							"isInverted": true
						},
						{
							"id": "while",
							"objectClass": "System",
							"sid": 948288508687171
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 382923820639003,
							"parameters": {
								"variable": "finish_id",
								"comparison": 1,
								"value": "next_id"
							}
						}
					],
					"actions": [],
					"sid": 993997850670440,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 974126394224509,
									"parameters": {
										"variable": "next_id",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "alert",
									"objectClass": "Browser",
									"sid": 140779685153799,
									"parameters": {
										"message": "\"Осторожно: редактору не удалось завершить кольцо трассы. Эту карту пока не стоит экспортировать.\""
									}
								},
								{
									"id": "set-at-xy",
									"objectClass": "ThisLvl",
									"sid": 467113854842623,
									"parameters": {
										"x": "0",
										"y": "1",
										"value": "0"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 283160372287955,
									"parameters": {
										"variable": "complete_track",
										"value": "false"
									}
								},
								{
									"id": "stop-loop",
									"objectClass": "System",
									"sid": 937271361081698
								}
							],
							"sid": 712511695437743
						},
						{
							"eventType": "comment",
							"text": "Write checkpoints"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 512888934013219
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "road",
									"sid": 392431728413355,
									"parameters": {
										"unique-id": "next_id"
									}
								}
							],
							"actions": [
								{
									"id": "push",
									"objectClass": "ThisLvl",
									"sid": 249244335681976,
									"parameters": {
										"where": "back",
										"value": "0",
										"axis": "x"
									}
								},
								{
									"id": "set-at-xy",
									"objectClass": "ThisLvl",
									"sid": 783241408751132,
									"parameters": {
										"x": "0",
										"y": "0",
										"value": "Self.At(0, 0) + 1"
									}
								},
								{
									"id": "set-at-xy",
									"objectClass": "ThisLvl",
									"sid": 416412100026394,
									"parameters": {
										"x": "Self.Width - 1",
										"y": "0",
										"value": "road.UID"
									}
								},
								{
									"id": "set-at-xy",
									"objectClass": "ThisLvl",
									"sid": 531015042173747,
									"parameters": {
										"x": "Self.Width - 1",
										"y": "1",
										"value": "\"road_\"&road.AnimationName"
									}
								},
								{
									"id": "set-at-xy",
									"objectClass": "ThisLvl",
									"sid": 191191582080708,
									"parameters": {
										"x": "Self.Width - 1",
										"y": "2",
										"value": "road.X"
									}
								},
								{
									"id": "set-at-xy",
									"objectClass": "ThisLvl",
									"sid": 429501829233949,
									"parameters": {
										"x": "Self.Width - 1",
										"y": "3",
										"value": "road.Y"
									}
								},
								{
									"id": "set-at-xy",
									"objectClass": "ThisLvl",
									"sid": 922656539682677,
									"parameters": {
										"x": "Self.Width - 1",
										"y": "4",
										"value": "road.Angle"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 739266420001544,
									"parameters": {
										"variable": "next_id",
										"value": "road.snapped_end"
									}
								},
								{
									"type": "comment",
									"text": "Set placed to false for later checks"
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "road",
									"sid": 504670484244806,
									"parameters": {
										"instance-variable": "placed",
										"value": "false"
									}
								}
							],
							"sid": 724879917782524
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Write rest of the map"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 277542111056105,
							"parameters": {
								"variable": "error"
							},
							"isInverted": true
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 509804961509474,
							"parameters": {
								"object": "MapElement",
								"expression": "MapElement.placed",
								"comparison": 0,
								"value": "1"
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 537138053228108,
							"parameters": {
								"object": "MapElement"
							}
						}
					],
					"actions": [
						{
							"id": "push",
							"objectClass": "ThisLvl",
							"sid": 581466946784346,
							"parameters": {
								"where": "back",
								"value": "0",
								"axis": "x"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 808347692727286,
							"parameters": {
								"x": "Self.Width - 1",
								"y": "0",
								"value": "MapElement.UID"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 483472588773076,
							"parameters": {
								"x": "Self.Width - 1",
								"y": "1",
								"value": "MapElement.ObjectTypeName&\"_\"&MapElement.AnimationName"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 443181310776549,
							"parameters": {
								"x": "Self.Width - 1",
								"y": "2",
								"value": "MapElement.X"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 525689823057762,
							"parameters": {
								"x": "Self.Width - 1",
								"y": "3",
								"value": "MapElement.Y"
							}
						},
						{
							"id": "set-at-xy",
							"objectClass": "ThisLvl",
							"sid": 746747761725768,
							"parameters": {
								"x": "Self.Width - 1",
								"y": "4",
								"value": "MapElement.Angle"
							}
						}
					],
					"sid": 154242034057013
				},
				{
					"eventType": "comment",
					"text": "Get placed back to True for checkpoints"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 928258608175671,
							"parameters": {
								"object": "road",
								"expression": "road.placed",
								"comparison": 0,
								"value": "0"
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 188924061862770,
							"parameters": {
								"object": "road"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "road",
							"sid": 697099161821461,
							"parameters": {
								"instance-variable": "placed",
								"value": "true"
							}
						}
					],
					"sid": 889130813974017
				},
				{
					"eventType": "comment",
					"text": "Actually save the map if all good"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 190541914651224,
							"parameters": {
								"variable": "error"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-key",
							"objectClass": "map_dates",
							"sid": 745123639222930,
							"parameters": {
								"key": "\"map_\"&MapSlot",
								"value": "Date.Now"
							}
						},
						{
							"id": "set-item",
							"objectClass": "LocalStorage",
							"sid": 415153599004973,
							"parameters": {
								"key": "\"map_dates\"",
								"value": "map_dates.AsJSON"
							}
						},
						{
							"id": "set-item",
							"objectClass": "LocalStorage",
							"sid": 106013354569303,
							"parameters": {
								"key": "\"map_\"&MapSlot",
								"value": "ThisLvl.AsJSON"
							}
						}
					],
					"sid": 600642555766954
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-all-sets-complete",
					"objectClass": "LocalStorage",
					"sid": 950644489469446
				}
			],
			"actions": [
				{
					"id": "alert",
					"objectClass": "Browser",
					"sid": 618026107267202,
					"parameters": {
						"message": "\"Карта сохранена!\""
					}
				}
			],
			"sid": 875669852644472
		}
	],
	"sid": 290152901591731
}